I"î5<h2 id="ä¸€ç®€ä»‹">ä¸€ã€ç®€ä»‹</h2>

<p>GlusterFS æ˜¯è¿‘å¹´å…´èµ·çš„ä¸€ä¸ªé«˜æ€§èƒ½å¼€æºåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼Œå…¶ç›®æ ‡æ˜¯å…¨å±€å‘½åç©ºé—´ã€åˆ†å¸ƒå¼å‰ç«¯çš„é«˜æ€§èƒ½æ–‡ä»¶ç³»ç»Ÿï¼Œç›®å‰å·²è¢« RedHat çœ‹ä¸­ï¼ŒGlusterFS å…·æœ‰é«˜æ‰©å±•ã€é«˜å¯æ€§ã€é«˜æ€§èƒ½ã€å¯æ¨ªå‘æ‰©å±•ç­‰ç‰¹ç‚¹ï¼Œå¹¶ä¸” GlusterFS æ²¡æœ‰å…ƒæ•°æ®æœåŠ¡å™¨çš„è®¾è®¡ï¼Œä½¿å…¶æ²¡æœ‰å•ç‚¹æ•…éšœé—®é¢˜ã€‚</p>

<h2 id="äºŒglusterfs-é›†ç¾¤æ­å»º">äºŒã€GlusterFS é›†ç¾¤æ­å»º</h2>

<h3 id="21ç¯å¢ƒå‡†å¤‡">2.1ã€ç¯å¢ƒå‡†å¤‡</h3>

<p>ç”±äºèµ„æºæœ‰é™ï¼Œæ‰€ä»¥ä»¥è™šæ‹Ÿæœºæµ‹è¯•ï¼Œæ•…æ€§èƒ½ä¸Šæ— æ³•ä½“ç°ï¼Œæ¯•ç«Ÿæ˜¯ä¸€å—ç¡¬ç›˜ï¼Œæ­å»ºç¯å¢ƒå¦‚ä¸‹</p>

<!--more-->

<table>
  <thead>
    <tr>
      <th>ä¸»æœº</th>
      <th>åŸŸå</th>
      <th>ç£ç›˜</th>
      <th>å¤§å°</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>192.168.1.100</td>
      <td>gfs-server1</td>
      <td>/dev/sdb</td>
      <td>50G</td>
    </tr>
    <tr>
      <td>192.168.1.107</td>
      <td>gfs-server2</td>
      <td>/dev/sdb</td>
      <td>50G</td>
    </tr>
    <tr>
      <td>192.168.1.126</td>
      <td>gfs-server3</td>
      <td>/dev/sdb</td>
      <td>50G</td>
    </tr>
    <tr>
      <td>192.168.1.217</td>
      <td>gfs-server4</td>
      <td>/dev/sdb</td>
      <td>50G</td>
    </tr>
  </tbody>
</table>

<h3 id="22å®‰è£…-glusterfs">2.2ã€å®‰è£… GlusterFS</h3>

<p>CentOS7 é»˜è®¤å®˜æ–¹ yum æºä¸­æœ‰ GlusterFS ç›¸å…³çš„ rpm åŒ…ï¼Œä½†æ˜¯å‘ç°æ²¡æœ‰ server ç«¯çš„ï¼Œå®˜æ–¹ç»™å‡ºçš„å®‰è£…å‘½ä»¤å¦‚ä¸‹</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># å®‰è£… GlusterFS yum æº</span>
yum <span class="nb">install</span> <span class="nt">-y</span> centos-release-gluster <span class="o">&amp;&amp;</span> yum update <span class="nt">-y</span>
<span class="c"># å®‰è£… GlusterFS ä»¥åŠå®¢æˆ·ç«¯</span>
yum <span class="nb">install</span> <span class="nt">-y</span> glusterfs glusterfs-fuse glusterfs-cli glusterfs-server glusterfs-api
</code></pre></div></div>

<h3 id="23åŸºç¡€ç¯å¢ƒé…ç½®">2.3ã€åŸºç¡€ç¯å¢ƒé…ç½®</h3>

<h4 id="231ntp-æ—¶é’ŸåŒæ­¥">2.3.1ã€ntp æ—¶é’ŸåŒæ­¥</h4>

<p>ç”±äº GlusterFS éœ€è¦è¿›è¡ŒèŠ‚ç‚¹é—´åŒæ­¥ï¼Œæ‰€ä»¥å„èŠ‚ç‚¹æ—¶é—´è¦ä¿è¯ä¸€è‡´æ€§ï¼Œæ•…éœ€è¦å®‰è£… ntp æ—¶é’ŸåŒæ­¥å·¥å…·</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># å®‰è£… ntp</span>
yum <span class="nb">install</span> <span class="nt">-y</span> ntp
</code></pre></div></div>

<p>å®‰è£…å®Œæˆååº”è¿›è¡Œæ—¶é’ŸåŒæ­¥ï¼Œè¿™é‡Œæš‚æ—¶ä½¿ç”¨ windows çš„æ—¶é’ŸæˆæƒæœåŠ¡å™¨ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©å…¶ä»–æ—¶é’ŸæˆæƒæœåŠ¡å™¨ï¼Œå®‰è£…æ—¶æµ‹è¯•å›½å†…çš„æ¸…åå¤§ç­‰å…¨éƒ¨è¶…æ—¶â€¦â€¦</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># åŒæ­¥æ—¶é’Ÿ</span>
ntpdate time.windows.com
</code></pre></div></div>

<p>åŒæ­¥å®Œæˆåæœ€å¥½è®¾ç½®å®šæ—¶åŒæ­¥ï¼Œä»¥ä¸‹ä¸ºæ¯å¤© 0 æ—¶å¼€å§‹æ²¡ 3 å°æ—¶è¿›è¡Œä¸€æ¬¡æ—¶é’ŸåŒæ­¥</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># å¢åŠ  å½“å‰ç”¨æˆ· cron ä»»åŠ¡</span>
crontab <span class="nt">-e</span>
<span class="c"># å†™å…¥å¦‚ä¸‹ä»»åŠ¡</span>
<span class="k">*</span> 0-23/3 <span class="k">*</span> <span class="k">*</span> <span class="k">*</span> root  /usr/sbin/ntpdate time.windows.com &amp;&gt; /dev/null<span class="p">;</span> /usr/sbin/clock <span class="nt">-w</span>
</code></pre></div></div>

<h4 id="232host-å®šä¹‰">2.3.2ã€host å®šä¹‰</h4>

<p>ç”±äºä½¿ç”¨åŸŸåæ–¹å¼è®¿é—®ï¼Œæ‰€ä»¥éœ€è¦ä¿®æ”¹æœ¬åœ° hosts æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è‡ªå»º dns æœåŠ¡å™¨æ¥è§£å†³ï¼Œä¸è¿‡æ®è¯´ dns æœåŠ¡å™¨æ–¹å¼ä¼šæœ‰ä¸€ç‚¹ç‚¹å»¶è¿Ÿï¼Œæ‰€ä»¥æ¨èä¿®æ”¹æœ¬åœ° hosts(æ²¡è¯æ˜è¿‡)</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># ä¿®æ”¹ hosts</span>
vim /etc/hosts
<span class="c"># å¢åŠ å¦‚ä¸‹</span>
192.168.1.100 gfs-server1
192.168.1.107 gfs-server2
192.168.1.126 gfs-server3
192.168.1.217 gfs-server4
</code></pre></div></div>

<h3 id="24å¯åŠ¨å¹¶åŠ å…¥èŠ‚ç‚¹">2.4ã€å¯åŠ¨å¹¶åŠ å…¥èŠ‚ç‚¹</h3>

<p>GlusterFS å®‰è£…å®Œæˆåå¯ç›´æ¥é€šè¿‡ systemd å¯åŠ¨</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>systemctl <span class="nb">enable </span>glusterd
systemctl start glusterd
</code></pre></div></div>

<p>å¯åŠ¨å®Œæˆåä¾¿å¯åœ¨ä»»æ„èŠ‚ç‚¹ä¸Šå°†å…¶ä»–èŠ‚ç‚¹åŠ å…¥è¿›æ¥ï¼Œç»„å»ºé›†ç¾¤</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for </span>gfs_host <span class="k">in </span>gfs-server1 gfs-server2 gfs-server3 gfs-server4<span class="p">;</span><span class="k">do
  </span>gluster peer probe <span class="nv">$gfs_host</span>
<span class="k">done</span>
</code></pre></div></div>

<h3 id="25ç£ç›˜é¢„å¤„ç†">2.5ã€ç£ç›˜é¢„å¤„ç†</h3>

<p>GlusterFS é›†ç¾¤æœåŠ¡å¯åŠ¨å¹¶åŠ å…¥å…¶ä»–èŠ‚ç‚¹åï¼Œå°±éœ€è¦ä¸ºä¸‹ä¸€æ­¥åˆ›å»ºå·(volume)å‡†å¤‡ç£ç›˜ï¼Œä»¥ä¸‹ä»¥ä¸€å— 50G çš„ç£ç›˜ä¸ºä¾‹ï¼Œåœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šæ‰§è¡Œå¦‚ä¸‹</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># é¦–å…ˆåˆ›å»ºåˆ†åŒº</span>
fdisk /dev/sdb
<span class="c"># ç„¶åè¾“å…¥ n åˆ›å»ºæ–°åˆ†åŒºï¼Œå†è¾“å…¥ p é€‰æ‹©ä¸»åˆ†åŒº</span>
<span class="c"># æœ€åè¾“å…¥ w ä¿å­˜åˆ†åŒºè¡¨ï¼Œå¦‚ä¸‹æ‰€ç¤º</span>

æ¬¢è¿ä½¿ç”¨ fdisk <span class="o">(</span>util-linux 2.23.2<span class="o">)</span>ã€‚

æ›´æ”¹å°†åœç•™åœ¨å†…å­˜ä¸­ï¼Œç›´åˆ°æ‚¨å†³å®šå°†æ›´æ”¹å†™å…¥ç£ç›˜ã€‚
ä½¿ç”¨å†™å…¥å‘½ä»¤å‰è¯·ä¸‰æ€ã€‚

Device does not contain a recognized partition table
ä½¿ç”¨ç£ç›˜æ ‡è¯†ç¬¦ 0x445cdbb5 åˆ›å»ºæ–°çš„ DOS ç£ç›˜æ ‡ç­¾ã€‚

å‘½ä»¤<span class="o">(</span>è¾“å…¥ m è·å–å¸®åŠ©<span class="o">)</span>ï¼šn
Partition <span class="nb">type</span>:
   p   primary <span class="o">(</span>0 primary, 0 extended, 4 free<span class="o">)</span>
   e   extended
Select <span class="o">(</span>default p<span class="o">)</span>: p
åˆ†åŒºå· <span class="o">(</span>1-4ï¼Œé»˜è®¤ 1<span class="o">)</span>ï¼š
èµ·å§‹ æ‰‡åŒº <span class="o">(</span>2048-104857599ï¼Œé»˜è®¤ä¸º 2048<span class="o">)</span>ï¼š
å°†ä½¿ç”¨é»˜è®¤å€¼ 2048
Last æ‰‡åŒº, +æ‰‡åŒº or +size<span class="o">{</span>K,M,G<span class="o">}</span> <span class="o">(</span>2048-104857599ï¼Œé»˜è®¤ä¸º 104857599<span class="o">)</span>ï¼š
å°†ä½¿ç”¨é»˜è®¤å€¼ 104857599
åˆ†åŒº 1 å·²è®¾ç½®ä¸º Linux ç±»å‹ï¼Œå¤§å°è®¾ä¸º 50 GiB

å‘½ä»¤<span class="o">(</span>è¾“å…¥ m è·å–å¸®åŠ©<span class="o">)</span>ï¼šw
The partition table has been altered!

Calling ioctl<span class="o">()</span> to re-read partition table.
æ­£åœ¨åŒæ­¥ç£ç›˜ã€‚
</code></pre></div></div>

<p>åˆ†åŒºåˆ›å»ºå®Œæˆåéœ€è¦å¯¹å…¶è¿›è¡Œæ ¼å¼åŒ–</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mkfs.ext4 /dev/sdb
</code></pre></div></div>

<p>æœ€åå‡†å¤‡æ¥ä¸‹æ¥è¦ä½¿ç”¨çš„ç›¸å…³æŒ‚è½½ç›®å½•</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># åˆ›å»ºç£ç›˜æŒ‚è½½ç›®å½•</span>
<span class="nb">mkdir</span> <span class="nt">-p</span> /data/gfs
<span class="c"># æŒ‚è½½ç¡¬ç›˜</span>
mount <span class="nt">-t</span> ext4 /dev/sdb /data/gfs
<span class="c"># åˆ›å»º GlusterFS å·ç›®å½•</span>
<span class="nb">mkdir</span> <span class="nt">-p</span> /data/gfs/brick0
</code></pre></div></div>

<p>ä¸ºäº†ä¿è¯ç£ç›˜ä¸€ç›´æŒ‚è½½ï¼Œæœ€å¥½è®¾ç½®ä¸€ä¸‹å¼€æœºè‡ªåŠ¨æŒ‚è½½</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># åé¢ä¸‰ä¸ªé€‰é¡¹ï¼Œdefaults è¡¨ç¤ºä½¿ç”¨é»˜è®¤æŒ‚è½½å‚æ•°ï¼Œ</span>
<span class="c"># ç¬¬ä¸€ä¸ª 1 ä»£è¡¨ å…è®¸ demp</span>
<span class="c"># ç¬¬äºŒä¸ª 1 ä»£è¡¨ å¼€æœºæ‰§è¡ŒæŒ‚è½½åˆ†åŒºæ£€æŸ¥</span>
<span class="nb">echo</span> <span class="s2">"/dev/sdb /data/gfs ext4 defaults 1 1"</span> <span class="o">&gt;&gt;</span> /etc/fstab
</code></pre></div></div>

<p>åˆ°æ­¤é›†ç¾¤åŸºæœ¬éƒ¨ç½²å®Œæˆ</p>

<h2 id="ä¸‰glusterfs-å­˜å‚¨å·è®¾ç½®">ä¸‰ã€GlusterFS å­˜å‚¨å·è®¾ç½®</h2>

<p>GlusterFS é›†ç¾¤æ­å»ºå®Œæˆåï¼Œä¾¿éœ€è¦åˆ›å»ºå­˜å‚¨å·(volume)æ¥æ•´åˆå„ä¸ªé›†ç¾¤ç£ç›˜å­˜å‚¨èµ„æºï¼Œä»¥ä¾¿åé¢è¿›è¡ŒæŒ‚è½½å’Œä½¿ç”¨</p>

<h3 id="31åˆ›å»ºåˆ†å¸ƒå¼-hash-å·">3.1ã€åˆ›å»ºåˆ†å¸ƒå¼ Hash å·</h3>

<p>åˆ†å¸ƒå¼ Hash å·å…¶åŸç†æ˜¯å½“å‘ GlusterFS å†™å…¥ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼ŒGlusterFS é€šè¿‡å¼¹æ€§ Hash ç®—æ³•å¯¹æ–‡ä»¶åè¿›è¡Œè®¡ç®—ï¼Œç„¶åå°†å…¶å‡åŒ€çš„åˆ†å¸ƒåˆ°å„ä¸ªèŠ‚ç‚¹ä¸Šï¼Œ<strong>å› æ­¤åˆ†å¸ƒå¼ Hash å·æ²¡æœ‰æ•°æ®å†—ä½™</strong>ï¼Œåˆ›å»ºåˆ†å¸ƒå¼ Hash å·å‘½ä»¤å¦‚ä¸‹</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gluster volume create gfs_disk<span class="se">\</span>
  gfs-server1:/data/gfs/brick0 <span class="se">\</span>
  gfs-server2:/data/gfs/brick0 <span class="se">\</span>
  gfs-server3:/data/gfs/brick0 <span class="se">\</span>
  gfs-server4:/data/gfs/brick0
</code></pre></div></div>

<h3 id="32åˆ›å»ºå¤åˆ¶å·">3.2ã€åˆ›å»ºå¤åˆ¶å·</h3>

<p>å¤åˆ¶å·ç›¸å½“äº RAID1ï¼Œåœ¨å‘ GlusterFS ä¸­å­˜å‚¨æ–‡ä»¶æ—¶ï¼ŒGlusterFS å°†å…¶æ‹·è´åˆ°æ‰€æœ‰èŠ‚ç‚¹ï¼Œå¹¶ä¸”æ˜¯åŒæ­¥çš„ï¼Œè¿™ä¼šæå¤§é™ä½ç£ç›˜æ€§èƒ½ï¼Œå¹¶å‘ˆçº¿æ€§é™ä½ï¼Œ<strong>ä½†æ˜¯å¤åˆ¶å·éšç€èŠ‚ç‚¹æ•°é‡å¢åŠ ï¼Œèµ·æ•°æ®å†—ä½™èƒ½åŠ›ä¹Ÿåœ¨å¢åŠ ï¼Œå› ä¸ºæ¯ä¸ªèŠ‚ç‚¹ä¸Šéƒ½æœ‰ä¸€ä»½æ•°æ®çš„å®Œå…¨æ‹·è´</strong>ï¼Œåˆ›å»ºå¤åˆ¶å·å‘½ä»¤å¦‚ä¸‹</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># replica å‚æ•°ç”¨äºæŒ‡å®šæ•°æ®æ‹·è´æœ‰å¤šå°‘ä»½</span>
<span class="c"># æ³¨æ„: replica æ•°é‡å¿…é¡»ä¸æŒ‡å®šçš„ GlusterFS é›†ç¾¤ brick æ•°é‡ä¿æŒä¸€è‡´</span>
gluster volume create gfs_disk replica 4 transport tcp <span class="se">\</span>
  gfs-server1:/data/gfs/brick0 <span class="se">\</span>
  gfs-server2:/data/gfs/brick0 <span class="se">\</span>
  gfs-server3:/data/gfs/brick0 <span class="se">\</span>
  gfs-server4:/data/gfs/brick0
</code></pre></div></div>

<h3 id="33åˆ›å»ºåˆ†å¸ƒå¼-hash-å¤åˆ¶å·">3.3ã€åˆ›å»ºåˆ†å¸ƒå¼ Hash å¤åˆ¶å·</h3>

<p>é¡¾åæ€ä¹‰ï¼Œåˆ†å¸ƒå¼ Hash å¤åˆ¶å·å°±æ˜¯å°† Hash å·ä¸å¤åˆ¶å·æ•´åˆä¸€ä¸‹ï¼Œé€šè¿‡ replica å‚æ•°æŒ‡å®šå¤åˆ¶ä»½æ•°ï¼Œä»¥ä¸‹ä¾‹å­ä¸ºä½¿ç”¨4ä¸ªèŠ‚ç‚¹åˆ›å»ºï¼Œæ¯ä¸¤ä¸ªèŠ‚ç‚¹ç»„æˆä¸€ä¸ªå¤åˆ¶å·ï¼Œç„¶åä¸¤å¯¹èŠ‚ç‚¹å†ç»„æˆ Hash å·</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># åˆ›å»º åˆ†å¸ƒå¼ Hash å¤åˆ¶å·æ—¶ï¼Œåªéœ€è¦ä¿è¯é›†ç¾¤æ•°é‡æ˜¯ replica æ•°é‡çš„æ•´æ•°å€å³å¯</span>
gluster volume create gfs_disk replica 2 transport tcp <span class="se">\</span>
  gfs-server1:/data/gfs/brick0 <span class="se">\</span>
  gfs-server2:/data/gfs/brick0 <span class="se">\</span>
  gfs-server3:/data/gfs/brick0 <span class="se">\</span>
  gfs-server4:/data/gfs/brick0
</code></pre></div></div>

<h3 id="34å…¶ä»–å·">3.4ã€å…¶ä»–å·</h3>

<ul>
  <li>æ¡å¸¦å·: æ¡å¸¦å·æ—¢å°†æ–‡ä»¶åˆ‡åˆ†æˆå—ï¼Œåˆ†å¸ƒå­˜æ”¾åœ¨å„ä¸ªèŠ‚ç‚¹ï¼Œå°† <code class="highlighter-rouge">replica</code> æ›¿æ¢æˆ <code class="highlighter-rouge">stripe</code> å³å¯</li>
  <li>åˆ†å¸ƒå¼ Hash æ¡å¸¦å·: åŒåˆ†å¸ƒå¼ Hash å¤åˆ¶å·ä¸€æ ·ï¼Œä¿è¯èŠ‚ç‚¹æ•°é‡æ˜¯ <code class="highlighter-rouge">stripe</code> çš„æ•´æ•°å€å³å¯</li>
</ul>

<p>ç”±äºæ¡å¸¦å·ä½¿ç”¨å¹¶ä¸å¤šï¼Œæ‰€ä»¥ä¸åšæ¼”ç¤ºï¼Œä¸€èˆ¬æ¡å¸¦å·é€‚ç”¨äºå•ä¸ªå¤§æ–‡ä»¶è¶…è¿‡ç£ç›˜å¤§å°æ—¶ä½¿ç”¨</p>

<h2 id="å››glusterfs-æŒ‚è½½åŠæµ‹è¯•">å››ã€GlusterFS æŒ‚è½½åŠæµ‹è¯•</h2>

<p>æ— è®ºåˆ›å»ºçš„å“ªç§å·ï¼Œæœ€ç»ˆåˆ›å»ºå®Œæˆåéƒ½å¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gluster volume info
</code></pre></div></div>

<h3 id="41glusterfs-å·æŒ‚è½½">4.1ã€GlusterFS å·æŒ‚è½½</h3>

<p>å·åˆ›å»ºå®Œæˆåï¼Œåªéœ€è¦åƒæ­£å¸¸ç£ç›˜ä¸€æ ·æŒ‚è½½å³å¯ä½¿ç”¨ï¼Œ<strong>ä¸åŒçš„æ˜¯æ–‡ä»¶ç³»ç»Ÿç±»å‹æŒ‡å®šä¸º <code class="highlighter-rouge">glusterfs</code> è€Œå·²</strong>ï¼Œæ“ä½œå¦‚ä¸‹</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># mount æ—¶æŒ‡å®šä»»æ„ä¸€ä¸ªèŠ‚ç‚¹å³å¯</span>
mount <span class="nt">-t</span> glusterfs gfs-server1:gfs_disk /mnt/gfs
</code></pre></div></div>

<p>ä¸ºä¿è¯ä¸€ç›´å¯ç”¨ï¼ŒåŒæ ·æœ€å¥½è®¾ç½®å¼€æœºè‡ªåŠ¨æŒ‚è½½</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="s2">"gfs-server1:gfs_disk /mnt/gfs glusterfs defaults 0 1"</span> <span class="o">&gt;&gt;</span> /etc/fstab
</code></pre></div></div>

<h3 id="42æµ‹è¯•-glusterfs">4.2ã€æµ‹è¯• GlusterFS</h3>

<p>ä»¥ä¸‹ä»¥åˆ†å¸ƒå¼ Hash å·ä¸ºä¾‹ï¼Œç”±äºå‡†å¤‡äº† 4 å„èŠ‚ç‚¹ï¼Œå¹¶ä¸” replica ä¸º 2ï¼Œæ‰€ä»¥ç†è®ºä¸Šå‘ GlusterFS å†™å…¥ä¸€ä¸ªæ–‡ä»¶åº”è¯¥ä¼šåœ¨ä»»æ„ä¸¤ä¸ªèŠ‚ç‚¹ä¸Šéƒ½æœ‰ä¸€ä»½</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># åœ¨ gfs-server1 ä¸Šæ‰§è¡Œ</span>
<span class="nb">cp </span>test.tar.gz /mnt.gfs
<span class="c"># æœ€åå¯ä»¥åœ¨ gfs-server3ã€gfs-server4 çš„ç£ç›˜ç›®å½•ä¸­çœ‹åˆ°</span>
<span class="nb">ls</span> /data/gfs/brick0
</code></pre></div></div>

<h2 id="äº”å…¶ä»–ç›¸å…³">äº”ã€å…¶ä»–ç›¸å…³</h2>

<p>æ²¡æœ‰ä»»ä½•é€šç”¨çš„æ–‡ä»¶ç³»ç»Ÿï¼Œé€šç”¨æ„å‘³ç€é€šé€šä¸èƒ½ç”¨ï¼Œå…³äº GlusterFS é€‚ç”¨åœºæ™¯ä»¥åŠç¼ºç‚¹å¯å‚è€ƒ <a href="http://blog.sae.sina.com.cn/archives/5141">æ¢ä¸ªè§’åº¦çœ‹GlusterFSåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ</a> æ–‡ç« ï¼Œå…³äº GlusterFS æ€§èƒ½ä¸ç›‘æ§å¯å‚è€ƒ <a href="https://github.com/jiobxn/one/wiki/00086_GlusterFS%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7&amp;%E9%85%8D%E9%A2%9D">GlusterFSæ€§èƒ½ç›‘æ§&amp;é…é¢</a>
è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼Œæœ¬æ–‡é‡‡ç”¨ <a href="http://creativecommons.org/licenses/by-nc-nd/4.0/">CC4.0</a> åè®®æˆæƒ</p>
:ET