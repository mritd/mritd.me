I"ÄC<h2 id="ä¸€ç®€ä»‹">ä¸€ã€ç®€ä»‹</h2>

<p>JAXBï¼ˆJava Architecture for XML Bindingç®€ç§°JAXBï¼‰å…è®¸Javaå¼€å‘äººå‘˜å°†Javaç±»æ˜ å°„ä¸ºXMLè¡¨ç¤ºæ–¹å¼ã€‚JAXBæä¾›ä¸¤ç§ä¸»è¦ç‰¹æ€§ï¼šå°†ä¸€ä¸ªJavaå¯¹è±¡åºåˆ—åŒ–ä¸ºXMLï¼Œä»¥åŠåå‘æ“ä½œï¼Œå°†XMLè§£ææˆJavaå¯¹è±¡ã€‚æ¢å¥è¯è¯´ï¼ŒJAXBå…è®¸ä»¥XMLæ ¼å¼å­˜å‚¨å’Œè¯»å–æ•°æ®ï¼Œè€Œä¸éœ€è¦ç¨‹åºçš„ç±»ç»“æ„å®ç°ç‰¹å®šçš„è¯»å–XMLå’Œä¿å­˜XMLçš„ä»£ç ï¼</p>

<p>JAXB åŸæœ¬æ˜¯ J2EE çš„ä¸€éƒ¨åˆ†ï¼Œä» JDK6 å¼€å§‹ï¼ŒJAXB å·²ç»åŠ å…¥åˆ° J2SE ä¸­ï¼Œä»¥ä¸‹ä¸ºç›®å‰å„ä¸ªç‰ˆæœ¬ JDK ä¸­ JAXB ç‰ˆæœ¬ï¼š</p>

<ul>
  <li>J2SE 6 : JAXB 2.0 (JSR 222)</li>
  <li>J2SE 7 : JAXB 2.2.3 (JSR 222, maintenance release 2)</li>
  <li>J2SE 8 : JAXB 2.2.8</li>
</ul>

<!--more-->

<h2 id="äºŒjaxb-ä¸-domsaxjdomdom4j-ç­‰æ¯”è¾ƒ">äºŒã€JAXB ä¸ DOM/SAX/JDOM/DOM4J ç­‰æ¯”è¾ƒ</h2>

<p>JAXB è‡´åŠ›äºè§£å†³ XML ä¸ Java ä¹‹é—´çš„å¯¹è±¡æ˜ å°„å…³ç³»ï¼Œè€Œ DOM/SAX ç­‰æ˜¯è§£æ XML çš„åº•å±‚ APIï¼›ä»è¿™é‡Œå¯ä»¥çœ‹å‡ºä¸¤è€…å‡ºå‘ç‚¹æœ‰ç€æœ¬è´¨ä¸åŒï¼Œ<strong>JAXB åº•å±‚ä¹Ÿä¼šè°ƒç”¨ SAX æ¥è§£æ XML æ–‡ä»¶</strong>ã€‚å•çº¯çš„è§£æ XML æ–‡ä»¶æ—¶ï¼Œæˆ‘ä»¬è¦è€ƒè™‘ä½¿ç”¨ DOM/SAX ç­‰è§£ææŠ€æœ¯ï¼Œè€Œæ¶‰åŠåˆ° XML åˆ° Java å¯¹è±¡æ˜ å°„æ—¶ï¼Œæˆ‘ä»¬åº”å½“è€ƒè™‘ä½¿ç”¨ JAXB å®ç°ã€‚</p>

<h2 id="ä¸‰object2xml-ç¼–ç»„marshal">ä¸‰ã€Object2XML ç¼–ç»„(marshal)</h2>

<p>ä» Java å¯¹è±¡è½¬åŒ–åˆ° XML æ–‡ä»¶çš„è¿‡ç¨‹æˆ‘ä»¬ç§°ä¹‹ä¸º <strong>ç¼–ç»„(malshal)</strong>ï¼›ä»¥ä¸‹ä¸ºä»£ç ç¤ºä¾‹ï¼š</p>

<p><strong>Persion å¯¹è±¡ å¸¦è½¬åŒ–çš„ Object</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="n">me</span><span class="o">.</span><span class="na">mritd</span><span class="o">.</span><span class="na">test</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.xml.bind.annotation.XmlRootElement</span><span class="o">;</span>

<span class="cm">/**
 * Created by mritd on 16/4/7.
 */</span>

<span class="c1">// JAXB æ³¨è§£,æ ‡æ³¨æ ¹èŠ‚ç‚¹åç§°</span>
<span class="nd">@XmlRootElement</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"Persion"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Persion</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>

    <span class="kd">private</span> <span class="nc">String</span> <span class="n">address</span><span class="o">;</span>

    <span class="kd">private</span> <span class="kt">int</span> <span class="n">age</span><span class="o">;</span>

    <span class="c1">// çœç•¥ SET GET æ–¹æ³•</span>
<span class="o">}</span>
</code></pre></div></div>

<p><strong>ç¼–ç»„(Marshal)æµ‹è¯•ç±»</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">JaxbMarshalTest</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

        <span class="c1">// é¦–å…ˆ åˆ›å»ºä¸€ä¸ª å¾…ç¼–ç»„çš„ Object</span>
        <span class="nc">Persion</span> <span class="n">persion</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Persion</span><span class="o">(</span><span class="s">"name"</span><span class="o">,</span><span class="s">"beijing"</span><span class="o">,</span><span class="mi">10</span><span class="o">);</span>

        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">// åˆå§‹åŒ– marshal</span>
            <span class="nc">JAXBContext</span> <span class="n">jaxbContext</span> <span class="o">=</span> <span class="nc">JAXBContext</span><span class="o">.</span><span class="na">newInstance</span><span class="o">(</span><span class="nc">Persion</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
            <span class="nc">Marshaller</span> <span class="n">marshaller</span> <span class="o">=</span> <span class="n">jaxbContext</span><span class="o">.</span><span class="na">createMarshaller</span><span class="o">();</span>

            <span class="c1">// è®¾ç½®æ ¼å¼åŒ–è¾“å‡º xml</span>
            <span class="n">marshaller</span><span class="o">.</span><span class="na">setProperty</span><span class="o">(</span><span class="nc">Marshaller</span><span class="o">.</span><span class="na">JAXB_FORMATTED_OUTPUT</span><span class="o">,</span><span class="kc">true</span><span class="o">);</span>

            <span class="c1">// æ‰§è¡Œç¼–ç»„</span>
            <span class="n">marshaller</span><span class="o">.</span><span class="na">marshal</span><span class="o">(</span><span class="n">persion</span><span class="o">,</span><span class="k">new</span> <span class="nc">File</span><span class="o">(</span><span class="s">"Persion.xml"</span><span class="o">));</span>

            <span class="c1">// è¾“å‡ºåˆ°æ§åˆ¶å°</span>
            <span class="n">marshaller</span><span class="o">.</span><span class="na">marshal</span><span class="o">(</span><span class="n">persion</span><span class="o">,</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">);</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">JAXBException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
</code></pre></div></div>

<h2 id="å››object2xml-è§£ç»„åç¼–ç»„unmarshal">å››ã€Object2XML è§£ç»„/åç¼–ç»„(UnMarshal)</h2>

<p>ä»å·²æœ‰çš„ XML æ–‡ä»¶è½¬åŒ–ä¸º Object å¯¹è±¡çš„è¿‡ç¨‹æˆ‘ä»¬ç§°ä¹‹ä¸ºè§£ç»„/åç¼–ç»„(UnMarshal)ï¼Œä»¥ä¸‹ä¼ªä»£ç ç¤ºä¾‹ï¼š</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">JaxbUnMarshalTest</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

        <span class="c1">// å®ä¾‹åŒ–æ–‡ä»¶</span>
        <span class="nc">File</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">File</span><span class="o">(</span><span class="s">"Persion.xml"</span><span class="o">);</span>

        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">// åˆ›å»º UnMarshaller</span>
            <span class="nc">JAXBContext</span> <span class="n">jaxbContext</span> <span class="o">=</span> <span class="nc">JAXBContext</span><span class="o">.</span><span class="na">newInstance</span><span class="o">(</span><span class="nc">Persion</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
            <span class="nc">Unmarshaller</span> <span class="n">unmarshaller</span> <span class="o">=</span> <span class="n">jaxbContext</span><span class="o">.</span><span class="na">createUnmarshaller</span><span class="o">();</span>

            <span class="c1">// è§£ç»„ æ“ä½œ</span>
            <span class="nc">Persion</span> <span class="n">persion</span> <span class="o">=</span> <span class="o">(</span><span class="nc">Persion</span><span class="o">)</span> <span class="n">unmarshaller</span><span class="o">.</span><span class="na">unmarshal</span><span class="o">(</span><span class="n">file</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">persion</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">JAXBException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>

<h2 id="äº”é€‚é…å™¨adapters">äº”ã€é€‚é…å™¨(Adapters)</h2>

<p>åœ¨æ™®é€šçš„ POJO ä¸ XML äº’ç›¸è½¬åŒ–æ—¶ï¼Œç®€å•çš„ç¼–ç»„å’Œè§£ç»„å·²ç»å®Œå…¨å¯ä»¥æ»¡è¶³éœ€è¦ï¼Œä½†æ˜¯å½“åŒ…å«å¤æ‚ç±»å‹çš„ POJO ç­‰æƒ…å†µå‡ºç°æ—¶ï¼Œç»„éœ€è¦ä½¿ç”¨é€‚é…å™¨åŠ ä»¥è¾…åŠ©ç¼–ç»„ä¸è§£ç»„ï¼Œæ ·ä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>

<p>é¦–å…ˆå®šä¹‰çš„ Persion ä¸­æœ‰ä¸€å±æ€§ä¸º LocalDate ç±»å‹ï¼Œæ­¤ç±»å‹ä¸ºå¤æ‚ç±»å‹ï¼Œéœ€è¦å®šä¹‰é€‚é…å™¨ï¼š</p>

<p><strong>LocalDate Adapter</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DateAdapter</span> <span class="kd">extends</span> <span class="nc">XmlAdapter</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">LocalDate</span><span class="o">&gt;</span> <span class="o">{</span>


    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">LocalDate</span> <span class="nf">unmarshal</span><span class="o">(</span><span class="nc">String</span> <span class="n">v</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nc">LocalDate</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">v</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">marshal</span><span class="o">(</span><span class="nc">LocalDate</span> <span class="n">v</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">v</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p><strong>POJO å¦‚ä¸‹</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// JAXB æ³¨è§£,æ ‡æ³¨æ ¹èŠ‚ç‚¹åç§°</span>
<span class="nd">@XmlRootElement</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"Persion"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Persion</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">address</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">age</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">LocalDate</span> <span class="n">date</span><span class="o">;</span>

    <span class="c1">// è‡ªå®šä¹‰é€‚é…å™¨</span>
    <span class="nd">@XmlJavaTypeAdapter</span><span class="o">(</span><span class="nc">DateAdapter</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">LocalDate</span> <span class="nf">getDate</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">date</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="c1">// çœç•¥å…¶ä»– SET GET æ–¹æ³•</span>
<span class="o">}</span>
</code></pre></div></div>

<p><strong>æµ‹è¯•ç±»</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">PersionMarshalAndUnMarshal</span> <span class="o">{</span>


    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// åˆ›å»ºå¯¹è±¡</span>
        <span class="nc">Persion</span> <span class="n">persion</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Persion</span><span class="o">(</span><span class="s">"mritd"</span><span class="o">,</span><span class="s">"beijing"</span><span class="o">,</span><span class="mi">18</span><span class="o">,</span><span class="nc">LocalDate</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">2016</span><span class="o">,</span><span class="mi">4</span><span class="o">,</span><span class="mi">8</span><span class="o">));</span>

        <span class="k">try</span> <span class="o">{</span>

            <span class="c1">// åˆ›å»º marshaller</span>
            <span class="nc">JAXBContext</span> <span class="n">jaxbContext</span> <span class="o">=</span> <span class="nc">JAXBContext</span><span class="o">.</span><span class="na">newInstance</span><span class="o">(</span><span class="nc">Persion</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
            <span class="nc">Marshaller</span> <span class="n">marshaller</span> <span class="o">=</span> <span class="n">jaxbContext</span><span class="o">.</span><span class="na">createMarshaller</span><span class="o">();</span>

            <span class="c1">// åˆ›å»ºç¼–ç»„æ–‡ä»¶</span>
            <span class="nc">File</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">File</span><span class="o">(</span><span class="s">"Persion.xml"</span><span class="o">);</span>

            <span class="c1">// æ‰§è¡Œç¼–ç»„</span>
            <span class="n">marshaller</span><span class="o">.</span><span class="na">setProperty</span><span class="o">(</span><span class="nc">Marshaller</span><span class="o">.</span><span class="na">JAXB_FORMATTED_OUTPUT</span><span class="o">,</span><span class="kc">true</span><span class="o">);</span>
            <span class="n">marshaller</span><span class="o">.</span><span class="na">marshal</span><span class="o">(</span><span class="n">persion</span><span class="o">,</span><span class="n">file</span><span class="o">);</span>
            <span class="n">marshaller</span><span class="o">.</span><span class="na">marshal</span><span class="o">(</span><span class="n">persion</span><span class="o">,</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">);</span>

            <span class="c1">// åˆ›å»º unMarshaller</span>
            <span class="nc">Unmarshaller</span> <span class="n">unmarshaller</span> <span class="o">=</span> <span class="n">jaxbContext</span><span class="o">.</span><span class="na">createUnmarshaller</span><span class="o">();</span>
            <span class="nc">Persion</span> <span class="n">unPersion</span> <span class="o">=</span> <span class="o">(</span><span class="nc">Persion</span><span class="o">)</span><span class="n">unmarshaller</span><span class="o">.</span><span class="na">unmarshal</span><span class="o">(</span><span class="n">file</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">unPersion</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">JAXBException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>

<h2 id="å…­å…¶ä»–å‚è€ƒ">å…­ã€å…¶ä»–å‚è€ƒ</h2>

<ul>
  <li>JAXB å¸¸ç”¨æ³¨è§£ <a href="http://www.cnblogs.com/fragranting/archive/2012/03/25/xml--jaxb.html">http://www.cnblogs.com/fragranting/archive/2012/03/25/xmlâ€“jaxb.html</a></li>
  <li>JAXBä½¿ç”¨æ•™ç¨‹ä¸€ <a href="http://www.blogways.net/blog/2015/05/05/jaxb-tutorial-1.html">http://www.blogways.net/blog/2015/05/05/jaxb-tutorial-1.html</a></li>
  <li>ä½¿ç”¨JAXB2.0å®ç°OXM <a href="http://my.oschina.net/zzx0421/blog/98186">http://my.oschina.net/zzx0421/blog/98186</a>
è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼Œæœ¬æ–‡é‡‡ç”¨ <a href="http://creativecommons.org/licenses/by-nc-nd/4.0/">CC4.0</a> åè®®æˆæƒ</li>
</ul>
:ET