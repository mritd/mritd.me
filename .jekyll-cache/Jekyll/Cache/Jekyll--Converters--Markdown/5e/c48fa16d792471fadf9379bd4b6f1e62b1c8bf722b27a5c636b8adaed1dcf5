I"È<h2 id="jps-å‘½ä»¤">jps å‘½ä»¤</h2>

<blockquote>
  <p>æœ¬æ–‡å‚è€ƒè‡ª <a href="http://www.hollischuang.com/archives/105">HollisChuangâ€™s Blog</a></p>
</blockquote>

<h3 id="ç®€ä»‹">ç®€ä»‹</h3>

<p>jps å‘½ä»¤ç”¨äºæŸ¥çœ‹å½“å‰ java è¿›ç¨‹åŠå…¶ pid ç­‰ç›¸å…³ä¿¡æ¯ï¼ŒåŒ <code class="highlighter-rouge">ps -aux | grep java</code> è¿™ç§å‘½ä»¤ä¸åŒçš„æ˜¯ï¼Œ<strong>jps å¹¶ä¸ä¾èµ–äºåº”ç”¨ç¨‹åºåæ¥æœç´¢è¿›ç¨‹(æ¯”å¦‚ <code class="highlighter-rouge">grep java</code> )</strong>ï¼› è¿™ä½¿å¾—å®ƒå¯ä»¥æ˜¾ç¤ºå‡ºæ²¡æœ‰æ‰§è¡Œä½“çš„ java è¿›ç¨‹ï¼›<strong>è¯¥å‘½ä»¤ 1.5+ å¯ç”¨</strong>ã€‚</p>

<!--more-->

<h3 id="åŸç†">åŸç†</h3>

<p>åœ¨ Java ç¨‹åºè¿è¡Œåï¼Œå…¶ä¼šåœ¨ <code class="highlighter-rouge">java.io.tmpdir</code> å‚æ•°æŒ‡å®šçš„ä½ç½®ç”Ÿæˆä¸€ä¸ª <code class="highlighter-rouge">hsperfdata_{UserName}</code> çš„ç›®å½•ï¼Œè¯¥ç›®å½•ä¸‹ä¼šç”Ÿæˆç±»ä¼¼ Linux ç¨‹åºè¿è¡Œæ—¶çš„äºŒè¿›åˆ¶ pid æ–‡ä»¶ï¼Œjsp å‘½ä»¤å®è´¨ä¸Šå°±æ˜¯åˆ—å‡ºè¯¥ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼›å…¶ç›¸å…³ä¿¡æ¯é€šè¿‡è§£æè¯¥æ–‡ä»¶è·å–ã€‚åœ¨ Linux ç³»ç»Ÿä¸‹ï¼Œè¿™ä¸ªç›®å½•ä½äº <code class="highlighter-rouge">/tmp/hsperfdata_{UserName}</code>ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p>

<p><img src="https://cdn.oss.link/markdown/hexo_jps_dir.png" alt="hexo_jps_dir" /></p>

<h3 id="å‘½ä»¤è¯¦è§£">å‘½ä»¤è¯¦è§£</h3>

<p>é¦–å…ˆå¯ä»¥æŸ¥çœ‹ jps å‘½ä»¤çš„å¸®åŠ©ï¼Œè·å–ç›¸å…³ä¿¡æ¯ï¼Œæ‰§è¡Œ <code class="highlighter-rouge">jps --help</code> å¦‚ä¸‹ï¼š</p>

<p><img src="https://cdn.oss.link/markdown/hexo_jps_help.png" alt="hexo_jps_help.png" /></p>

<h4 id="-q-å‚æ•°">-q å‚æ•°</h4>

<p><code class="highlighter-rouge">-q</code> å‚æ•°åªæ˜¾ç¤ºpidï¼Œä¸æ˜¾ç¤ºclassåç§°,jaræ–‡ä»¶åå’Œä¼ é€’ç»™main æ–¹æ³•çš„å‚æ•°</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>mritd@iZ257uxyg2vZ ~]<span class="nv">$ </span>jps <span class="nt">-q</span>
17433
15645
<span class="o">[</span>mritd@iZ257uxyg2vZ ~]<span class="err">$</span>
</code></pre></div></div>

<h4 id="-m-å‚æ•°">-m å‚æ•°</h4>

<p><code class="highlighter-rouge">-m</code> è¾“å‡ºä¼ é€’ç»™ <code class="highlighter-rouge">main</code> æ–¹æ³•çš„å‚æ•°ï¼Œåœ¨åµŒå…¥å¼jvmä¸Šå¯èƒ½æ˜¯null</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>mritd@iZ257uxyg2vZ ~]<span class="nv">$ </span>jps <span class="nt">-m</span>
17478 Jps <span class="nt">-m</span>
15645 Bootstrap start
<span class="o">[</span>mritd@iZ257uxyg2vZ ~]<span class="err">$</span>
</code></pre></div></div>

<h4 id="-l-å‚æ•°">-l å‚æ•°</h4>

<p><code class="highlighter-rouge">-l</code> å‚æ•°è¾“å‡ºåº”ç”¨ç¨‹åºmain classçš„å®Œæ•´packageå æˆ–è€… åº”ç”¨ç¨‹åºçš„jaræ–‡ä»¶å®Œæ•´è·¯å¾„å</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>mritd@iZ257uxyg2vZ ~]<span class="nv">$ </span>jps <span class="nt">-l</span>
17498 sun.tools.jps.Jps
15645 org.apache.catalina.startup.Bootstrap
<span class="o">[</span>mritd@iZ257uxyg2vZ ~]<span class="err">$</span>
</code></pre></div></div>

<h4 id="-v-å‚æ•°">-v å‚æ•°</h4>

<p><code class="highlighter-rouge">-v</code> å‚æ•°è¾“å‡ºä¼ é€’ç»™JVMçš„å‚æ•°</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>mritd@iZ257uxyg2vZ ~]<span class="nv">$ </span>jps <span class="nt">-v</span>
15645 Bootstrap <span class="nt">-Djava</span>.util.logging.config.file<span class="o">=</span>/home/mritd/usr/local/apache-tomcat-8.0.32/conf/logging.properties <span class="nt">-Djava</span>.util.logging.manager<span class="o">=</span>org.apache.juli.ClassLoaderLogManager <span class="nt">-Djava</span>.endorsed.dirs<span class="o">=</span>/home/mritd/usr/local/apache-tomcat-8.0.32/endorsed <span class="nt">-Dcatalina</span>.base<span class="o">=</span>/home/mritd/usr/local/apache-tomcat-8.0.32 <span class="nt">-Dcatalina</span>.home<span class="o">=</span>/home/mritd/usr/local/apache-tomcat-8.0.32 <span class="nt">-Djava</span>.io.tmpdir<span class="o">=</span>/home/mritd/usr/local/apache-tomcat-8.0.32/temp
17518 Jps <span class="nt">-Dapplication</span>.home<span class="o">=</span>/home/mritd/usr/local/jdk1.8.0_73 <span class="nt">-Xms8m</span>
<span class="o">[</span>mritd@iZ257uxyg2vZ ~]<span class="err">$</span>
</code></pre></div></div>

<h4 id="-v-å‚æ•°-1">-V å‚æ•°</h4>

<p><code class="highlighter-rouge">-V</code> å‚æ•°è¾“å‡ºé€šè¿‡æ ‡è®°çš„æ–‡ä»¶ä¼ é€’ç»™JVMçš„å‚æ•°( <code class="highlighter-rouge">.hotspotrc</code> æ–‡ä»¶ï¼Œæˆ–è€…æ˜¯é€šè¿‡å‚æ•° <code class="highlighter-rouge">-XX:Flags=&lt;filename&gt;</code> æŒ‡å®šçš„æ–‡ä»¶)ã€‚</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>mritd@iZ257uxyg2vZ ~]<span class="nv">$ </span>jps <span class="nt">-V</span>
17595 Jps
15645 Bootstrap
<span class="o">[</span>mritd@iZ257uxyg2vZ ~]<span class="err">$</span>
</code></pre></div></div>

<h3 id="hostid-è¯¦è§£">hostid è¯¦è§£</h3>

<p><code class="highlighter-rouge">hostid</code> å³ <strong>æœåŠ¡å™¨æ ‡è¯†</strong>ï¼Œå®ƒæŒ‡å®šäº†ç›®æ ‡çš„æœåŠ¡å™¨ï¼Œå®ƒçš„è¯­æ³•å¦‚ä¸‹ï¼š</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>protocol:][[//]hostname][:port][/servername]
</code></pre></div></div>
<ul>
  <li>protocol: å¦‚æœ <code class="highlighter-rouge">protocol</code>åŠ <code class="highlighter-rouge">hostname</code> éƒ½æ²¡æœ‰æŒ‡å®šï¼Œé‚£è¡¨ç¤ºçš„æ˜¯ä¸å½“å‰ç¯å¢ƒç›¸å…³çš„æœ¬åœ°åè®®ï¼Œå¦‚æœæŒ‡å®šäº† <code class="highlighter-rouge">hostname</code> å´æ²¡æœ‰æŒ‡å®š <code class="highlighter-rouge">protocol</code>ï¼Œé‚£ä¹ˆ <code class="highlighter-rouge">protocol</code> çš„é»˜è®¤å°±æ˜¯ <code class="highlighter-rouge">rmi</code>ã€‚</li>
  <li>hostname: æœåŠ¡å™¨çš„IPæˆ–è€…åç§°ï¼Œæ²¡æœ‰æŒ‡å®šåˆ™è¡¨ç¤ºæœ¬æœºã€‚</li>
  <li>port: è¿œç¨‹ <code class="highlighter-rouge">rmi</code> çš„ç«¯å£ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šåˆ™é»˜è®¤ä¸º <code class="highlighter-rouge">1099</code>ã€‚</li>
  <li>Servername: æ³¨å†Œåˆ° <code class="highlighter-rouge">RMI</code> æ³¨å†Œä¸­å¿ƒä¸­çš„ <code class="highlighter-rouge">jstatd</code> çš„åç§°ã€‚
è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼Œæœ¬æ–‡é‡‡ç”¨ <a href="http://creativecommons.org/licenses/by-nc-nd/4.0/">CC4.0</a> åè®®æˆæƒ</li>
</ul>
:ET