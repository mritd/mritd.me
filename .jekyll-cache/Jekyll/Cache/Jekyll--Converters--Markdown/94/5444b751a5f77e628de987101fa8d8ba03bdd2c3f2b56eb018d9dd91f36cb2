I"ê#<blockquote>
  <p>nexus æœ€åˆç”¨äºæ­å»º maven ç§æœï¼Œæä¾›ä¼ä¸šçº§ maven jar åŒ…ç®¡ç†ç­‰åŠŸèƒ½ï¼›2.x åç»­æ”¯æŒäº† npmã€rpm ç­‰åŒ…ç®¡ç†ï¼›æœ€æ–°ç‰ˆæœ¬ 3.x å¼€å§‹æ”¯æŒ Docker ä»“åº“ï¼Œä»¥ä¸‹ä¸ºä½¿ç”¨ neuxs æ’¸ä¸€ä¸ª docker ä»“åº“çš„æ•™ç¨‹</p>
</blockquote>

<h3 id="ä¸€ç¯å¢ƒå‡†å¤‡">ä¸€ã€ç¯å¢ƒå‡†å¤‡</h3>

<p>åˆå§‹ç¯å¢ƒå¦‚ä¸‹</p>

<ul>
  <li>Centos 7 x86_64</li>
  <li>OpenJDK 8</li>
  <li>Nexus 3.2.0-01</li>
</ul>

<p>å®‰è£… OpenJDK å‘½ä»¤å¦‚ä¸‹</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yum <span class="nb">install </span>java-1.8.0-openjdk <span class="nt">-y</span>
</code></pre></div></div>

<p>å®‰è£…å®ŒæˆåéªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>âœ  ~ java <span class="nt">-version</span>
openjdk version <span class="s2">"1.8.0_111"</span>
OpenJDK Runtime Environment <span class="o">(</span>build 1.8.0_111-b15<span class="o">)</span>
OpenJDK 64-Bit Server VM <span class="o">(</span>build 25.111-b15, mixed mode<span class="o">)</span>
</code></pre></div></div>

<p>ä¸‹è½½ neuxs3 å®‰è£…åŒ…å¹¶è§£å‹</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget <span class="nt">--no-check-certificate</span> https://download.sonatype.com/nexus/3/nexus-3.2.0-01-unix.tar.gz
<span class="nb">tar</span> <span class="nt">-zxvf</span> nexus-3.2.0-01-unix.tar.gz
</code></pre></div></div>

<h3 id="äºŒå®‰è£…-nexus">äºŒã€å®‰è£… nexus</h3>

<p>é¦–å…ˆå°† nexus ç§»åŠ¨åˆ°ä»»æ„ä½ç½®</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nb">mv </span>nexus-3.2.0-01 /usr/local
</code></pre></div></div>

<p>åˆ›å»º nexus ç”¨æˆ·</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>adduser <span class="nt">-r</span> <span class="nt">-s</span> /sbin/nologin <span class="nt">-d</span> /data/nexus-data nexus
</code></pre></div></div>

<p><strong>é»˜è®¤ nexus è¿è¡Œåä¼šåœ¨åŒçº§ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª <code class="highlighter-rouge">sonatype-work</code> å·¥ä½œç›®å½•ï¼Œå¹¶å°†å…¶æ•°æ®ä¿å­˜åœ¨æ­¤ç›®å½•ä¸­ï¼Œæ‰€ä»¥ä¸ºäº†æ•°æ®æŒä¹…åŒ–å…ˆæ‰‹åŠ¨åˆ›å»ºå¹¶è®¾ç½®å…¶æ•°æ®å­˜å‚¨ä½ç½®</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># åˆ›å»ºåŸºæœ¬ç›®å½•ç»“æ„</span>
<span class="nb">mkdir</span> <span class="nt">-p</span> /usr/local/sonatype-work
<span class="c"># åˆ›å»ºå»ºæ•°æ®ç›®å½•</span>
<span class="nb">mkdir</span> <span class="nt">-p</span> /data/nexus-data/<span class="o">{</span>etc,log,tmp<span class="o">}</span>
<span class="c"># å°†æ•°æ®ç›®å½•è½¯è¿æ¥åˆ°å·¥ä½œç›®å½•</span>
<span class="nb">ln</span> <span class="nt">-s</span> /data/nexus-data /usr/local/sonatype-work/nexus3
<span class="c"># æ›´æ–°æ‰€æœ‰ç›®å½•æƒé™</span>
<span class="nb">chmod</span> <span class="nt">-R</span> 755 /usr/local/<span class="o">{</span>sonatype-work,nexus-3.2.0-01<span class="o">}</span> /data/nexus-data
<span class="nb">chown</span> <span class="nt">-R</span> nexus:nexus /usr/local/<span class="o">{</span>sonatype-work,nexus-3.2.0-01<span class="o">}</span> /data/nexus-data
</code></pre></div></div>

<p>æœ€åå¯åŠ¨ nexus è®¿é—® 8081 ç«¯å£å³å¯</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># ä»¥å‰å°æ–¹å¼è¿è¡Œ</span>
<span class="nb">sudo</span> <span class="nt">-u</span> nexus /usr/local/nexus-3.2.0-01/bin/nexus run
<span class="c"># åå°è¿è¡Œ</span>
<span class="nb">sudo</span> <span class="nt">-u</span> nexus /usr/local/nexus-3.2.0-01/bin/nexus start
</code></pre></div></div>

<p>é»˜è®¤è´¦æˆ· <code class="highlighter-rouge">admin</code> å¯†ç  <code class="highlighter-rouge">admin123</code>ï¼Œç™»å½•å¦‚ä¸‹</p>

<p><img src="https://cdn.oss.link/markdown/sb9dw.jpg" alt="nexus_homepage" /></p>

<h3 id="ä¸‰åˆ›å»º-docker-ä»“åº“">ä¸‰ã€åˆ›å»º docker ä»“åº“</h3>

<p>åœ¨è®¾ç½® <code class="highlighter-rouge">Repositories</code> é€‰é¡¹å¡ä¸­ä¸­é€‰æ‹© <code class="highlighter-rouge">Create repository</code></p>

<p><img src="https://cdn.oss.link/markdown/m7m53.jpg" alt="Create repository" /></p>

<p>ä»“åº“ç±»å‹æœ‰å¾ˆå¤šï¼Œdocker ç›¸å…³æ€»å…±æœ‰ä¸‰ç§ç±»å‹ï¼Œå…¶ç§‰æ‰¿ maven ç§æœçš„æ¦‚å¿µ</p>

<p><img src="https://cdn.oss.link/markdown/pm0r8.jpg" alt="repository type" /></p>

<ul>
  <li>hosted: æœ¬åœ°å­˜å‚¨ï¼Œå³åŒ docker å®˜æ–¹ä»“åº“ä¸€æ ·æä¾›æœ¬åœ°ç§æœåŠŸèƒ½</li>
  <li>proxy: æä¾›ä»£ç†å…¶ä»–ä»“åº“çš„ç±»å‹ï¼Œå¦‚ docker ä¸­å¤®ä»“åº“</li>
  <li>group: ç»„ç±»å‹ï¼Œå®è´¨ä½œç”¨æ˜¯ç»„åˆå¤šä¸ªä»“åº“ä¸ºä¸€ä¸ªåœ°å€</li>
</ul>

<h4 id="31åˆ›å»ºä¸€ä¸ªç§æœ">3.1ã€åˆ›å»ºä¸€ä¸ªç§æœ</h4>

<p>é€‰æ‹© <code class="highlighter-rouge">hosted</code> ç±»å‹ä»“åº“ï¼Œç„¶åè¾“å…¥ä¸€ä¸ªä»“åº“åï¼Œ<strong>å¹¶å‹¾é€‰ HTTP é€‰é¡¹ï¼Œç«¯å£ä»»æ„å³å¯(ä¸‹é¢æˆªå›¾å¤±è¯¯ï¼Œä¸è¡¥äº†)</strong></p>

<p><img src="https://cdn.oss.link/markdown/972cl.jpg" alt="create hosted repository" /></p>

<h4 id="32æµ‹è¯•ç§æœ">3.2ã€æµ‹è¯•ç§æœ</h4>

<p>åˆ›å»ºå¥½ä»¥åæ›´æ”¹ docker å‚æ•°ï¼Œæµ‹è¯•å³å¯</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># å¢åŠ éå®‰å…¨ä»“åº“</span>
vim /usr/lib/systemd/system/docker.service
<span class="c"># åœ¨ ExecStart åé¢å¢åŠ (è¿™é‡Œæ”¹äº† hostï¼Œä¸Šé¢ç«¯å£ç”¨çš„ 8800)</span>
<span class="nt">--insecure-registry</span> registry.com:8800
<span class="c"># é‡å¯ docker</span>
systemctl daemon-reload
systemctl restart docker
</code></pre></div></div>

<p>æµ‹è¯• push å’Œ pull é•œåƒ</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>âœ  ~ docker tag mritd/alpine registry.com:8800/alpine
âœ  ~ docker push registry.com:8800/alpine
The push refers to a repository <span class="o">[</span>registry.com:8800/alpine]
754684812d65: Pushed
60ab55d3379d: Pushed
latest: digest: sha256:28f397aca53eb3e8ea1627f4af9c262fca7db17f0c6db492b53adc7bca7d0f91 size: 739
âœ  ~ docker rmi registry.com:8800/alpine
Untagged: registry.com:8800/alpine:latest
Untagged: registry.com:8800/alpine@sha256:28f397aca53eb3e8ea1627f4af9c262fca7db17f0c6db492b53adc7bca7d0f91
âœ  ~ docker rmi mritd/alpine
Untagged: mritd/alpine:latest
Untagged: mritd/alpine@sha256:28f397aca53eb3e8ea1627f4af9c262fca7db17f0c6db492b53adc7bca7d0f91
Deleted: sha256:090c790ee6f28f495d92d5be43641573b0d1b5502b35f7662d88cdbf8d548afd
Deleted: sha256:378e2b887fcdffcbd113a7cf6f97e9f8a58851b0a205b31a93acdb887912850d
âœ  ~ docker pull registry.com:8800/alpine
Using default tag: latest
latest: Pulling from alpine

0a8490d0dfd3: Already exists
8fb018fb4173: Pull <span class="nb">complete
</span>Digest: sha256:28f397aca53eb3e8ea1627f4af9c262fca7db17f0c6db492b53adc7bca7d0f91
Status: Downloaded newer image <span class="k">for </span>registry.com:8800/alpine:latest
</code></pre></div></div>

<h4 id="32åˆ›å»ºä»£ç†ä»“åº“">3.2ã€åˆ›å»ºä»£ç†ä»“åº“</h4>

<p>ä»£ç†ä»“åº“å‚è€ƒå®˜æ–¹æ–‡æ¡£ <a href="http://books.sonatype.com/nexus-book/reference3/docker.html#docker-introduction">ç‚¹è¿™é‡Œ</a>ï¼Œæœ¬äººä¸æ‰â€¦.æ²¡æˆåŠŸï¼Œæœ‰çˆ±æ¢ç´¢çš„å¯ä»¥å°è¯•ä¸€ä¸‹ï¼Œå¦‚æœæˆåŠŸå¯ä»¥æ¢è®¨ä¸€ä¸‹â€¦..ä¸ªäººæ€€ç–‘æ˜¯ index æœ‰é—®é¢˜</p>

<p>æ ¹æ®å®˜æ–¹æ–‡æ¡£çš„è¿™æ®µæç¤º</p>

<blockquote>
  <p>Just to recap, in order to configure a proxy for Docker Hub you configure the Remote Storage URL to https://registry-1.docker.io, enable Docker V1 API support and for the choice of Docker Index select the Use Docker Hub option.</p>
</blockquote>

<p>åˆ›å»ºä»“åº“ç±»å‹é€‰æ‹© <code class="highlighter-rouge">proxy</code>ï¼ŒRemote storage å¡«å†™ <code class="highlighter-rouge">https://registry-1.docker.io</code>ï¼ŒDocker index é€‰æ‹© <code class="highlighter-rouge">Use Docker Hub</code>ï¼Œç„¶åä» ä»£ç†ä»“åº“åœ°å€ pull å°±å¯ä»¥ï¼Œä½†æ˜¯æœ¬äººç™¾è¯•ä¸æˆåŠŸï¼Œæˆªå›¾å¦‚ä¸‹</p>

<p><img src="https://cdn.oss.link/markdown/q350r.jpg" alt="proxy registry" /></p>

<h4 id="34åˆ›å»º-group-ä»“åº“">3.4ã€åˆ›å»º group ä»“åº“</h4>

<p>group ä¸æä¾›å…·ä½“å­˜å‚¨æœåŠ¡ï¼Œå…¶ä¸»è¦ä½œç”¨å°±æ˜¯ç±»ä¼¼ä¸€ä¸ªå‰ç«¯åä»£ï¼Œå¯ä»¥æŠŠå¤šä¸ªä»“åº“(æ¯”å¦‚ hosted ç§æœå’Œ proxy)ç»„åˆæˆä¸€ä¸ªåœ°å€æä¾›è®¿é—®ï¼Œåˆ›å»ºæ–¹æ³•åŸºæœ¬ç›¸åŒï¼Œä¸»è¦æ˜¯æ·»åŠ å¤šä¸ª hosted æˆ–è€… proxy ç±»å‹çš„å…¶ä»–ä»“åº“å³å¯ï¼Œè¿™é‡Œä¸å†è¯¦ç»†é˜è¿°ï¼Œæˆªå›¾å¦‚ä¸‹</p>

<p><img src="https://cdn.oss.link/markdown/2q1qv.jpg" alt="group registry" /></p>

<h3 id="å››å…¶ä»–ç›¸å…³">å››ã€å…¶ä»–ç›¸å…³</h3>

<p>ç”±äº nexus åœ¨ maven jar ç®¡ç†æ–¹é¢å·²ç»æ˜¯å¾ˆæˆç†Ÿçš„äº§å“ï¼Œå¢åŠ äº† docker ç­‰æ”¯æŒä»¥ååŸºæœ¬æ€æƒ³æ²¡æœ‰å¤ªå¤§å˜åŒ–ï¼Œæ‰€ä»¥å…³äºå…¶ä»–ä»“åº“é…ç½®è¿™é‡Œä¸å†æåŠï¼Œå…·ä½“å¯ä»¥å‚è€ƒ<a href="http://books.sonatype.com/nexus-book/reference3/index.html">å®˜æ–¹æ–‡æ¡£</a>ï¼›2.x å¯ä»¥é€šè¿‡å›¾å½¢ç•Œé¢ä¸Šä¼  jarï¼Œ3.x ç›®å‰åªèƒ½é€šè¿‡ maven deploy æ’ä»¶å®ç°ï¼Œå¯ä»¥å‚è€ƒ<a href="https://maven.apache.org/guides/mini/guide-3rd-party-jars-remote.html">è¿™é‡Œ</a></p>

<p>è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼Œæœ¬æ–‡é‡‡ç”¨ <a href="http://creativecommons.org/licenses/by-nc-nd/4.0/">CC4.0</a> åè®®æˆæƒ</p>
:ET