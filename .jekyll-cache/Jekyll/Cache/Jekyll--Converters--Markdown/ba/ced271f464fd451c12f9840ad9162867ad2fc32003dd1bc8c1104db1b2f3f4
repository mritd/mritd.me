I"Ù <h2 id="ä¸€å®‰è£…-shadowsocks">ä¸€ã€å®‰è£… Shadowsocks</h2>

<p>Ubuntu ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å®‰è£…å³å¯ï¼Œå…¶ä»–ç³»ç»Ÿå¯ä½¿ç”¨ python å®‰è£…ï¼Œå…·ä½“è¯·è‡ªè¡Œ Google</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>apt-get <span class="nb">install </span>shadowsocks <span class="nt">-y</span>
</code></pre></div></div>

<p>å®‰è£…å®Œæˆåç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œå¡«å†™å¯¹åº”æœåŠ¡å™¨åœ°å€</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vim /etc/shadowsocks.json
</code></pre></div></div>

<p>æœåŠ¡å™¨é…ç½®æ ·ä¾‹å¦‚ä¸‹</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">{</span>
    <span class="s2">"server"</span>:<span class="s2">"1.1.1.1"</span>,
    <span class="s2">"server_port"</span>:8383,
    <span class="s2">"local_address"</span>: <span class="s2">"127.0.0.1"</span>,
    <span class="s2">"local_port"</span>:1080,
    <span class="s2">"password"</span>:<span class="s2">"passwd"</span>,
    <span class="s2">"timeout"</span>:300,
    <span class="s2">"method"</span>:<span class="s2">"aes-256-cfb"</span>,
    <span class="s2">"fast_open"</span>: <span class="nb">true</span>,
    <span class="s2">"workers"</span>: 1
<span class="o">}</span>
</code></pre></div></div>

<!--more-->

<p>æœ€åå¯åŠ¨ä»£ç†</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">nohup </span>sslocal <span class="nt">-c</span> /etc/shadowsocks.json &amp;
</code></pre></div></div>

<h2 id="äºŒå°†-socks5-ä»£ç†è½¬åŒ–ä¸º-http-ä»£ç†">äºŒã€å°† Socks5 ä»£ç†è½¬åŒ–ä¸º http ä»£ç†</h2>

<p>socks5 ä»£ç†è½¬æ¢æˆ http ä»£ç†éœ€è¦å€ŸåŠ©ç¬¬ä¸‰æ–¹è½¯ä»¶å®Œæˆï¼Œè¿™é‡Œä½¿ç”¨ <strong>privoxy</strong>ï¼ŒUbuntu ä¸‹ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å®‰è£… <strong>privoxy</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>apt-get <span class="nb">install </span>privoxy <span class="nt">-y</span>
</code></pre></div></div>

<p>ç¼–è¾‘é…ç½®æ–‡ä»¶</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># å…ˆå¤‡ä»½åŸé…ç½®æ–‡ä»¶</span>
<span class="nb">mv</span> /etc/privoxy/config /etc/privoxy/config.bak
<span class="c"># åœ¨æ–°å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶</span>
vim /etc/privoxy/config
</code></pre></div></div>

<p><strong>privoxy é…ç½®æ ·ä¾‹å¦‚ä¸‹</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># è½¬å‘åœ°å€</span>
forward-socks5   /               127.0.0.1:1080 <span class="nb">.</span>
<span class="c"># ç›‘å¬åœ°å€</span>
listen-address  localhost:8118
<span class="c"># local network do not use proxy</span>
forward         192.168.<span class="k">*</span>.<span class="k">*</span>/     <span class="nb">.</span>
forward            10.<span class="k">*</span>.<span class="k">*</span>.<span class="k">*</span>/     <span class="nb">.</span>
forward           127.<span class="k">*</span>.<span class="k">*</span>.<span class="k">*</span>/     <span class="nb">.</span>
</code></pre></div></div>

<p><strong>æœ€åå¯åŠ¨ privoxyï¼ŒUbuntu 16 å¯åŠ¨å‘½ä»¤å¦‚ä¸‹</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># å¯åŠ¨</span>
systemctl start privoxy
<span class="c"># æŸ¥çœ‹çŠ¶æ€</span>
systemctl status privoxy
</code></pre></div></div>

<h2 id="ä¸‰åˆ›å»ºå¿«æ·ä»£ç†å‘½ä»¤">ä¸‰ã€åˆ›å»ºå¿«æ·ä»£ç†å‘½ä»¤</h2>

<p>å®Œæˆä¸Šä¸¤æ­¥é…ç½®åï¼Œå³å¯å°†éœ€è¦ä»£ç†çš„è½¯ä»¶æŒ‡å‘ <code class="highlighter-rouge">127.0.0.1:8118</code> ç«¯å£å³å¯ï¼Œä½†æ˜¯æœ‰äº›å‘½ä»¤è¡Œæ“ä½œå¹¶æ— æ³•è®¾ç½®ï¼Œåªèƒ½é€šè¿‡å…¨å±€ä»£ç†å˜é‡ <code class="highlighter-rouge">http_proxy</code> ç­‰è®¾ç½®ï¼Œæ­¤æ—¶è®¾ç½®åå…¨å±€éƒ½å—å½±å“ï¼Œä¸ºæ­¤å¯ä»¥å†™ä¸€ä¸ªä»£ç†è„šæœ¬ï¼Œå¦‚ä¸‹</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vim /usr/local/bin/proxy
</code></pre></div></div>

<p><strong>è„šæœ¬å†…å®¹å¦‚ä¸‹</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="nv">http_proxy</span><span class="o">=</span>http://127.0.0.1:8118 <span class="nv">https_proxy</span><span class="o">=</span>http://127.0.0.1:8118 <span class="nv">$*</span>
</code></pre></div></div>

<p><strong>èµ‹äºˆå¯æ‰§è¡Œæƒé™</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">chmod</span> +x /usr/local/bin/proxy
</code></pre></div></div>

<p><strong>æœ€åï¼Œå¯¹ä»»ä½•æƒ³è¦èµ°ä»£ç†çš„å‘½ä»¤ï¼Œåªéœ€è¦åœ¨å‰é¢åŠ ä¸Š <code class="highlighter-rouge">proxy</code> å³å¯ï¼Œæ ·ä¾‹å¦‚ä¸‹</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>proxy gvm <span class="nb">install </span>go1.6.3
</code></pre></div></div>

<h2 id="å››å¿«é€Ÿé…ç½®è„šæœ¬">å››ã€å¿«é€Ÿé…ç½®è„šæœ¬</h2>

<p><strong>æœ€åå†™äº†ä¸€ä¸ªå¿«é€Ÿè®¾ç½®è„šæœ¬ï¼Œæ¯”è¾ƒç®€é™‹â€¦..</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>

<span class="c"># æ›´æ–°è½¯ä»¶æº</span>
apt-get update <span class="o">&amp;&amp;</span> apt-get upgrade <span class="nt">-y</span>
<span class="c"># å®‰è£… pip å’Œ privoxy</span>
apt-get <span class="nb">install </span>python-pip privoxy <span class="nt">-y</span>
<span class="c">#  å®‰è£… shadowsocks</span>
pip <span class="nb">install </span>shadowsocks

<span class="c"># ç›¸å…³é…ç½®æ–‡ä»¶</span>
<span class="nv">sscfg</span><span class="o">=</span><span class="s2">"/etc/ss.json"</span>
<span class="nv">privoxycfg</span><span class="o">=</span><span class="s2">"/etc/privoxy/config"</span>
<span class="nv">proxycmd</span><span class="o">=</span><span class="s2">"/usr/local/bin/proxy"</span>

<span class="c"># åˆ›å»º shadowsocks é…ç½®æ ·ä¾‹</span>
<span class="nb">cat</span> <span class="o">&gt;</span><span class="s2">"</span><span class="nv">$sscfg</span><span class="s2">"</span><span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh">
{
    "server":"1.1.1.1",
    "server_port":8383,
    "local_address": "127.0.0.1",
    "local_port":1080,
    "password":"passwd",
    "timeout":300,
    "method":"aes-256-cfb",
    "fast_open": true,
    "workers": 1
}
</span><span class="no">EOF

</span><span class="c"># å¤‡ä»½ privoxy é…ç½®</span>
<span class="nb">mv</span> <span class="nv">$privoxycfg</span> /etc/privoxy/config.bak

<span class="c"># åˆ›å»º privoxy é…ç½®</span>
<span class="nb">cat</span> <span class="o">&gt;</span><span class="s2">"</span><span class="nv">$privoxycfg</span><span class="s2">"</span><span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh">
# è½¬å‘åœ°å€
forward-socks5   /               127.0.0.1:1080 .
# ç›‘å¬åœ°å€
listen-address  localhost:8118
# local network do not use proxy
forward         192.168.*.*/     .
forward            10.*.*.*/     .
forward           127.*.*.*/     .
</span><span class="no">EOF

</span><span class="c"># åˆ›å»ºä»£ç†è„šæœ¬</span>
<span class="nb">cat</span> <span class="o">&gt;</span><span class="s2">"</span><span class="nv">$proxycmd</span><span class="s2">"</span><span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh">
#!/bin/bash
http_proxy=http://127.0.0.1:8118 https_proxy=http://127.0.0.1:8118 </span><span class="se">\$</span><span class="sh">*
</span><span class="no">EOF

</span><span class="c"># å¢åŠ æ‰§è¡Œæƒé™</span>
<span class="nb">chmod</span> +x <span class="nv">$proxycmd</span>

<span class="nb">echo</span> <span class="s2">"å®‰è£…å®Œæˆ!"</span>
<span class="nb">echo</span> <span class="s2">"shadowsocks é…ç½®è¯·ä¿®æ”¹ /etc/ss.json!"</span>
<span class="nb">echo</span> <span class="s2">"ä½¿ç”¨ nohup sslocal -c /etc/ss.json &amp; åå°è¿è¡Œ shadowsocks!"</span>
<span class="nb">echo</span> <span class="s2">"ä½¿ç”¨ systemctl start privoxy å¯åŠ¨privoxy!"</span>
<span class="nb">echo</span> <span class="s2">"ä½¿ç”¨ proxy xxxx ä»£ç†æŒ‡å®šåº”ç”¨!"</span>
</code></pre></div></div>
<p>è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼Œæœ¬æ–‡é‡‡ç”¨ <a href="http://creativecommons.org/licenses/by-nc-nd/4.0/">CC4.0</a> åè®®æˆæƒ</p>
:ET