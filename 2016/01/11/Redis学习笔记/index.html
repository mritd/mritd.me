<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Redis学习笔记">
    <meta name="keywords"  content="Redis">
    <meta name="theme-color" content="#000000">
    
    <title>Redis学习笔记 - 漠然的博客 | mritd Blog</title>

    <!-- Web App Manifest -->
    <link rel="manifest" href="/pwa/manifest.json">

    <!-- Favicon -->
    <link rel="shortcut icon" href="/img/favicon.ico">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://mritd.me/2016/01/11/Redis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Rouge CSS -->
    <link rel="stylesheet" href="/css/syntax.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/mritd-blog.min.css">

    <!-- Custom Fonts -->
    <!-- <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
    <!-- Hux change font-awesome CDN to qiniu -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">


    <!-- Hux Delete, sad but pending in China
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/
    css'>
    -->


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">漠然</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>
                    
                    <li>
                        <a href="/about/">About</a>
                    </li>
                    
                    <li>
                        <a href="/tags/">Tags</a>
                    </li>
                    
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    var __HuxNav__ = {
        close: function(){
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        },
        open: function(){
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }

    // Bind Event
    $toggle.addEventListener('click', function(e){
        if ($navbar.className.indexOf('in') > 0) {
            __HuxNav__.close()
        }else{
            __HuxNav__.open()
        }
    })

    /**
     * Since Fastclick is used to delegate 'touchstart' globally
     * to hack 300ms delay in iOS by performing a fake 'click',
     * Using 'e.stopPropagation' to stop 'touchstart' event from 
     * $toggle/$collapse will break global delegation.
     * 
     * Instead, we use a 'e.target' filter to prevent handler
     * added to document close HuxNav.  
     *
     * Also, we use 'click' instead of 'touchstart' as compromise
     */
    document.addEventListener('click', function(e){
        if(e.target == $toggle) return;
        if(e.target.className == 'icon-bar') return;
        __HuxNav__.close();
    })
</script>


    <!-- Post Header -->
<style type="text/css">
    header.intro-header{
        position: relative;
        background-image: url('/img/home-bg.jpg')
    }

    
</style>
<header class="intro-header" >
    <div class="header-mask"></div>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        
                        <a class="tag" href="/tags/#Linux" title="Linux">Linux</a>
                        
                    </div>
                    <h1>Redis学习笔记</h1>
                    
                    
                    <h2 class="subheading"></h2>
                    
                    <span class="meta">Posted by 漠然 on January 11, 2016</span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

    <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                <!-- Multi-Lingual -->
                

                <p><img src="https://cdn.oss.link/markdown/hexo_redis_logo1.jpg" alt="hexo_redis_logo" /></p>

<h2 id="一简介">一、简介</h2>

<blockquote>
  <p>redis是一个key-value存储系统。和Memcached类似，它支持存储的value类型相对更多，包括string(字符串)、list(链表)、set(集合)、zset(有序集合)和hashs（哈希类型）。这些数据类型都支持push/pop、add/remove及取交集并集和差集及更丰富的操作，而且这些操作都是原子性的。在此基础上，redis支持各种不同方式的排序。与memcached一样，为了保证效率，数据都是缓存在内存中。</p>

</blockquote>

<!--more-->

<blockquote>
  <p>redis会周期性的把更新的数据写入磁盘或者把修改操作写入追加的记录文件，并且在此基础上实现了master-slave(主从)同步。Redis 是一个高性能的key-value数据库。 redis的出现，很大程度补偿了memcached这类key/value存储的不足，在部 分场合可以对关系数据库起到很好的补充作用。它提供了Python，Ruby，Erlang，PHP客户端，使用很方便。</p>
</blockquote>

<h2 id="二redis功能">二、Redis功能</h2>

<ol>
  <li>Redis 的Sharding
    <blockquote>
      <p>Redis 支持客户端的Sharding 功能，通过一致性hash 算法实现，当前Redis 不支持故障冗余，在集群中不能在线增加或删除Redis。</p>
    </blockquote>
  </li>
  <li>Redis 的master/slave 复制
    <blockquote>
      <p>一个master 支持多个slave；Slave 可以接受其他slave 的连接来替代他连接master；复制在master 是非阻塞的，而在slave 是阻塞的；复制被利用来提供可扩展性，在slave 端只提供查询功能及数据的冗余。</p>
    </blockquote>
  </li>
  <li>Redis 的Virtual Memory 功能(VM)
    <blockquote>
      <p>vm 是Redis2.0 新增的一个非常稳定和可靠的功能，vm 的引入是为了提高Redis 的性能，也就是把很少使用的value 保存到disk，而key 保存在内存中。实际上就是如果你有10w 的keys 在内存中，而只有仅仅10%左右的key 经常使用，那么Redis 可以通过开启VM 尝试将不经常使用的Value 转换到disk 上保存。</p>
    </blockquote>
  </li>
  <li>Redis 的附加档案（AOF）功能
    <blockquote>
      <p>Redis 通过配置的策略将数据集保存到aof 中，当Redis 挂掉后能够通过aof 恢复到挂掉前的状态</p>
    </blockquote>
  </li>
</ol>

<h2 id="三redis-数据类型">三、Redis 数据类型</h2>

<ul>
  <li>字符串(Strings)
    <blockquote>
      <p>字符串是一种最基本的Redis值类型。<strong>Redis字符串是二进制安全的，这意味着一个Redis字符串能包含任意类型的数据</strong>，例如： 一张JPEG格式的图片或者一个序列化的Ruby对象。<strong>一个字符串类型的值最多能存储512M字节的内容。</strong>与Memcached一样，一个key对应一个value，其上支持的操作与Memcached的操作类似；但它的功能更丰富。</p>
    </blockquote>
  </li>
  <li>列表(Lists)
    <blockquote>
      <p>Redis列表是简单的字符串列表，<strong>按照插入顺序排序</strong>。 你可以添加一个元素到列表的头部（左边）或者尾部（右边）。Lists是一个链表结构，主要功能是push、pop、获取一个范围的所有值等等。操作中<strong>key理解为链表的名字</strong>。LPUSH命令插入一个新元素到列表头部，而RPUSH命令 插入一个新元素到列表的尾部。<strong>当对一个空key执行其中某个命令时，将会创建一个新表</strong>。 类似的，<strong>如果一个操作要清空列表，那么key会从对应的key空间删除</strong>。这是个非常便利的语义，因为如果使用一个不存在的key作为参数，所有的列表命令都会像在对一个空表操作一样。</p>
    </blockquote>
  </li>
  <li>集合(Sets)
    <blockquote>
      <p>Redis集合是一个无序的字符串合集。你可以以 <strong>O(1)</strong> 的时间复杂度完成 <strong>添加、删除以及测试元素是否存在</strong> 的操作。Redis集合有着 <strong>不允许相同成员存在</strong> 的优秀特性。向集合中多次添加同一元素，在集合中最终只会存在一个此元素。实际上这就意味着，在添加元素前，你并不需要事先进行检验此元素是否已经存在的操作。Redis的集合支持集合运算，<strong>可以进行 合集、交集、差集运算。一个集合最多可以包含232-1个元素（4294967295，每个集合超过40亿个元素）。</strong></p>
    </blockquote>
  </li>
  <li>有序集合(Sorted sets)
    <blockquote>
      <p>Redis有序集合和Redis集合类似，是不包含 相同字符串的合集；他在set的基础上 <strong>增加了一个顺序属性</strong>，这一属性 <strong>在添加修改元素的时候可以指定，每次指定后自动重新按新的值调整顺序</strong>。可以理解了有两列的mysql表，一列存value，一列存顺序。操作中key理解为 Sorted sets 的名字。</p>
    </blockquote>
  </li>
  <li>哈希(Hashes)
    <blockquote>
      <p>Redis hash是一个string类型的field和value的映射表.一个key可对应多个field，一个field对应一个value。将一个对象存储为hash类型，较于每个字段都存储成string类型更能节省内存。新建一个hash对象时开始是用zipmap(又称为small hash)来存储的。这个zipmap其实并不是hash table，但是zipmap相比正常的hash实现可以节省不少hash本身需要的一些元数据存储开销。尽管zipmap的添加，删除，查找都是O(n)，但是由于一般对象的field数量都不太多。所以使用zipmap也是很快的,也就是说添加删除平均还是O(1)。如果field或者value的大小超出一定限制后，Redis会在内部自动将zipmap替换成正常的hash实现。</p>
    </blockquote>
  </li>
  <li>Hashes相关</li>
</ul>

<blockquote>
  <p>Hashes 相关方法如下</p>
</blockquote>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>hset(key, field, value)                             向名称为key的hash中添加元素field&lt;—&gt;value
hget(key, field)                                    返回名称为key的hash中field对应的value
hmget(key, field1,...,field N)                      返回名称为key的hash中field i对应的value
hmset(key, field1, value1,...,field N, value N)     向名称为key的hash中添加元素field i&lt;—&gt;value i
hincrby(key, field, integer)                        将名称为key的hash中field的value增加integer
hexists(key, field)                                 名称为key的hash中是否存在键为field的域
hdel(key, field)                                    删除名称为key的hash中键为field的域
hlen(key)                                           返回名称为key的hash中元素个数
hkeys(key)                                          返回名称为key的hash中所有键
hvals(key)                                          返回名称为key的hash中所有键对应的value
hgetall(key)                                        返回名称为key的hash中所有的键（field）及其对应的value
</code></pre></div></div>

<blockquote>
  <p>示例操作如下</p>
</blockquote>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>redis&gt; HMSET user:1000 username antirez password P1pp0 age 34
OK
redis&gt; HGETALL user:1000
1<span class="o">)</span> <span class="s2">"username"</span>
2<span class="o">)</span> <span class="s2">"antirez"</span>
3<span class="o">)</span> <span class="s2">"password"</span>
4<span class="o">)</span> <span class="s2">"P1pp0"</span>
5<span class="o">)</span> <span class="s2">"age"</span>
6<span class="o">)</span> <span class="s2">"34"</span>
redis&gt; HSET user:1000 password 12345
<span class="o">(</span>integer<span class="o">)</span> 0
redis&gt; HGETALL user:1000
1<span class="o">)</span> <span class="s2">"username"</span>
2<span class="o">)</span> <span class="s2">"antirez"</span>
3<span class="o">)</span> <span class="s2">"password"</span>
4<span class="o">)</span> <span class="s2">"12345"</span>
5<span class="o">)</span> <span class="s2">"age"</span>
6<span class="o">)</span> <span class="s2">"34"</span>
redis&gt;
</code></pre></div></div>

<h2 id="四redis-数据类型的常用操作">四、Redis 数据类型的常用操作</h2>

<blockquote>
  <p>由于命令太多，所以不一一列举，具体参考 <a href="http://redisdoc.com/">Redis命令参考</a>，文档已进行离线缓存 <a href="http://pan.baidu.com/s/1ntPny6d">Redis命令手册下载</a></p>
</blockquote>

<h3 id="字符串">字符串</h3>

<h4 id="set">SET</h4>

<blockquote>
  <p>将字符串值 <code class="language-plaintext highlighter-rouge">value</code> 关联到 <code class="language-plaintext highlighter-rouge">key</code> (设置值)。
如果 key 已经持有其他值，<code class="language-plaintext highlighter-rouge">SET</code> 就覆写旧值，无视类型。
对于某个原本带有生存时间（TTL）的键来说，当 <code class="language-plaintext highlighter-rouge">SET</code> 命令成功在这个键上执行时，这个键原有的 TTL 将被清除。</p>
</blockquote>

<p><strong>可选参数</strong></p>

<ul>
  <li>EX
格式为 <code class="language-plaintext highlighter-rouge">EX second</code>；设置键的过期时间为 second 秒。 SET key value EX second 效果等同于 SETEX key second value 。</li>
  <li>PX
格式为 <code class="language-plaintext highlighter-rouge">PX millisecond</code>；设置键的过期时间为 millisecond 毫秒。 SET key value PX millisecond 效果等同于 PSETEX key millisecond value 。</li>
  <li>NX
只在键不存在时，才对键进行设置操作。 SET key value NX 效果等同于 SETNX key value 。</li>
  <li>XX
只在键已经存在时，才对键进行设置操作。</li>
</ul>

<p><strong>可接受的语法</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SET KEY VALUE <span class="o">[</span>OPTION] <span class="o">[</span>OPTION_VALUE]
</code></pre></div></div>

<p><strong>代码示例</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SET a 10             <span class="c"># 设置 key a value 10</span>
SET a 10 EX 10       <span class="c"># 同上，但有效期为10秒，过期后再 get key 则返回nil</span>
SET a 10 PX 10000    <span class="c"># 同上，有效期为10000毫秒</span>
SET a 10 NX          <span class="c"># 仅当 a 不存在时才进行设置，否则返回错误</span>
SET a 10 XX          <span class="c"># 仅当 a 存在时进行设置</span>
</code></pre></div></div>

<h4 id="get">GET</h4>

<blockquote>
  <p>返回 <code class="language-plaintext highlighter-rouge">key</code> 所关联的字符串值。(获取值)
如果 <code class="language-plaintext highlighter-rouge">key</code> 不存在那么返回特殊值 <code class="language-plaintext highlighter-rouge">nil</code>。
假如 <code class="language-plaintext highlighter-rouge">key</code> 储存的值不是字符串类型，返回一个错误，因为 <code class="language-plaintext highlighter-rouge">GET</code> 只能用于处理字符串值。</p>
</blockquote>

<p><strong>可接受的语法</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET KEY
</code></pre></div></div>

<p><strong>代码示例</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SET a 10         <span class="c"># 先设置一个值</span>
GET a            <span class="c"># 获取 a 的值，此时 a 必须为String，否则返回错误</span>
GET b            <span class="c"># 尝试获取一个不存在的值时 返回nil</span>
</code></pre></div></div>

<h4 id="mset">MSET</h4>

<blockquote>
  <p>同时设置一个或多个 <code class="language-plaintext highlighter-rouge">key-value</code> 对。
如果某个给定 <code class="language-plaintext highlighter-rouge">key</code> 已经存在，那么 <code class="language-plaintext highlighter-rouge">MSET</code> 会用新值覆盖原来的旧值，如果这不是你所希望的效果，请考虑使用 <code class="language-plaintext highlighter-rouge">MSETNX</code> 命令：它只会在所有给定 <code class="language-plaintext highlighter-rouge">key</code> 都不存在的情况下进行设置操作。
<strong><code class="language-plaintext highlighter-rouge">MSET</code> 是一个原子性(atomic)操作，所有给定 <code class="language-plaintext highlighter-rouge">key</code> 都会在同一时间内被设置，某些给定 <code class="language-plaintext highlighter-rouge">key</code> 被更新而另一些给定 <code class="language-plaintext highlighter-rouge">key</code> 没有改变的情况，不可能发生。</strong></p>
</blockquote>

<p><strong>可接受的语法</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>MSET KEY1 VALUE1 KEY2 VALUE2 ...
</code></pre></div></div>

<p><strong>代码示例</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>MSET a 10 b 11 c 12       <span class="c"># 同时设置 a、b、c的值，要么全部成功要么全部失败</span>
</code></pre></div></div>

<h4 id="mget">MGET</h4>

<blockquote>
  <p>返回所有(一个或多个)给定 <code class="language-plaintext highlighter-rouge">key</code> 的值。
如果给定的 <code class="language-plaintext highlighter-rouge">key</code> 里面，<strong>有某个 <code class="language-plaintext highlighter-rouge">key</code> 不存在，那么这个 <code class="language-plaintext highlighter-rouge">key</code> 返回特殊值 <code class="language-plaintext highlighter-rouge">nil</code></strong>。因此，该命令永不失败。</p>
</blockquote>

<p><strong>可接受的语法</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>MGET KEY1 KEY2 KEY3 ...
</code></pre></div></div>

<p><strong>代码示例</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>localhost:6379&gt; MSET a 10 b 11 c 12
OK
localhost:6379&gt; MGET a b c d              <span class="c"># d 不存在 则返回 nil</span>
1<span class="o">)</span> <span class="s2">"10"</span>
2<span class="o">)</span> <span class="s2">"11"</span>
3<span class="o">)</span> <span class="s2">"12"</span>
4<span class="o">)</span> <span class="o">(</span>nil<span class="o">)</span>
localhost:6379&gt;
</code></pre></div></div>

<h4 id="setrange">SETRANGE</h4>

<blockquote>
  <p>用 <code class="language-plaintext highlighter-rouge">value</code> 参数覆写(overwrite)给定 <code class="language-plaintext highlighter-rouge">key</code> 所储存的字符串值，从偏移量 <code class="language-plaintext highlighter-rouge">offset</code> 开始。不存在的 <code class="language-plaintext highlighter-rouge">key</code> 当作空白字符串处理。<strong>可以理解为对指定位置字符串覆盖</strong>
<code class="language-plaintext highlighter-rouge">SETRANGE</code> 命令会确保字符串足够长以便将 <code class="language-plaintext highlighter-rouge">value</code> 设置在指定的偏移量上，<strong>如果给定 <code class="language-plaintext highlighter-rouge">key</code> 原来储存的字符串长度比偏移量小(比如字符串只有5个字符长，但你设置的 <code class="language-plaintext highlighter-rouge">offset</code> 是10)，那么原字符和偏移量之间的空白将用零字节<code class="language-plaintext highlighter-rouge">(zerobytes,"\x00")</code>来填充。</strong>
注意你能使用的最大偏移量是 2^29-1(536870911) ，因为 Redis 字符串的大小被限制在 512 兆(megabytes)以内。如果你需要使用比这更大的空间，你可以使用多个 key 。</p>

  <p>当生成一个很长的字符串时，Redis 需要分配内存空间，该操作有时候可能会造成服务器阻塞(block)。在2010年的Macbook Pro上，设置偏移量为 536870911(512MB 内存分配)，耗费约 300 毫秒，设置偏移量为 134217728(128MB 内存分配)，耗费约 80 毫秒，设置偏移量 33554432(32MB 内存分配)，耗费约 30 毫秒，设置偏移量为 8388608(8MB 内存分配)，耗费约 8 毫秒。<strong>注意若首次内存分配成功之后，再对同一个 key 调用 SETRANGE 操作，无须再重新内存。</strong></p>
</blockquote>

<p><strong>可接受的语法</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SETRANGE KEY STR_VALUE
</code></pre></div></div>

<p><strong>代码示例</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>localhost:6379&gt; SET a <span class="s2">"123456789"</span>
OK
localhost:6379&gt; SETRANGE a 5 <span class="s2">"XX"</span>
<span class="o">(</span>integer<span class="o">)</span> 9
localhost:6379&gt; GET a
<span class="s2">"12345XX89"</span>
localhost:6379&gt; SETRANGE a 5 <span class="s2">"XXXXXXXXXXXXXX"</span>     <span class="c"># 超过原有长度自动拼接</span>
<span class="o">(</span>integer<span class="o">)</span> 19
localhost:6379&gt; GET a
<span class="s2">"12345XXXXXXXXXXXXXX"</span>
localhost:6379&gt; SETRANGE a 7 <span class="s2">"XXXX"</span>               <span class="c"># 不够的话自动用 \x00 占位</span>
<span class="o">(</span>integer<span class="o">)</span> 11
localhost:6379&gt; GET a
<span class="s2">"123</span><span class="se">\x</span><span class="s2">00</span><span class="se">\x</span><span class="s2">00</span><span class="se">\x</span><span class="s2">00</span><span class="se">\x</span><span class="s2">00XXXX"</span>
</code></pre></div></div>

<h4 id="getrange">GETRANGE</h4>

<blockquote>
  <p>返回 <code class="language-plaintext highlighter-rouge">key</code> 中字符串值的子字符串，字符串的截取范围由 <code class="language-plaintext highlighter-rouge">start</code> 和 <code class="language-plaintext highlighter-rouge">end</code> 两个偏移量决定(包括 start 和 end 在内)。负数偏移量表示从字符串最后开始计数， -1 表示最后一个字符， -2 表示倒数第二个，以此类推。<code class="language-plaintext highlighter-rouge">GETRANGE</code> 通过保证子字符串的值域(range)不超过实际字符串的值域来处理超出范围的值域请求。</p>

  <p><strong>在 &lt;= 2.0 的版本里，GETRANGE 被叫作 SUBSTR。</strong></p>
</blockquote>

<p><strong>可接受的语法</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GETRANGE KEY START_INDEX END_INDEX
</code></pre></div></div>

<p><strong>代码示例</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>localhost:6379&gt; SET a <span class="s2">"test GETRANGE"</span>
OK
localhost:6379&gt; GETRANGE a 0 3          <span class="c"># 获取0~3位置字符</span>
<span class="s2">"test"</span>
localhost:6379&gt; GETRANGE a 0 100        <span class="c"># 超过长度则表示获取全部</span>
<span class="s2">"test GETRANGE"</span>
localhost:6379&gt; GETRANGE a <span class="nt">-3</span> <span class="nt">-1</span>        <span class="c"># 获取只能从左到右获取</span>
<span class="s2">"NGE"</span>
localhost:6379&gt; GETRANGE a <span class="nt">-1</span> <span class="nt">-3</span>        <span class="c"># 回绕操作将返回空串</span>
<span class="s2">""</span>
localhost:6379&gt; GETRANGE a 0 <span class="nt">-1</span>         <span class="c"># 正确的获取全部字符串</span>
<span class="s2">"test GETRANGE"</span>
localhost:6379&gt;
</code></pre></div></div>

<h4 id="append">APPEND</h4>

<blockquote>
  <p>如果 <code class="language-plaintext highlighter-rouge">key</code> 已经存在并且是一个字符串， <code class="language-plaintext highlighter-rouge">APPEND</code> 命令将 <code class="language-plaintext highlighter-rouge">value</code> 追加到 <code class="language-plaintext highlighter-rouge">key</code> 原来的值的末尾。<strong>如果 <code class="language-plaintext highlighter-rouge">key</code> 不存在，<code class="language-plaintext highlighter-rouge">APPEND</code> 就简单地将给定 key 设为 <code class="language-plaintext highlighter-rouge">value</code> ，就像执行 <code class="language-plaintext highlighter-rouge">SET key value</code> 一样。</strong></p>
</blockquote>

<p><strong>可接受的语法</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>APPEND KEY STRING_VALUE
</code></pre></div></div>

<p><strong>代码示例</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>localhost:6379&gt; EXISTS b                      <span class="c"># b 不存在</span>
<span class="o">(</span>integer<span class="o">)</span> 0
localhost:6379&gt; APPEND b <span class="s2">"test not exists"</span>    <span class="c"># 此时进行 APPEND 操作等同于 SET</span>
<span class="o">(</span>integer<span class="o">)</span> 15
localhost:6379&gt; GET b                         
<span class="s2">"test not exists"</span>
localhost:6379&gt; APPEND b <span class="s2">"XXXXXXX"</span>            <span class="c"># 拼接字符串</span>
<span class="o">(</span>integer<span class="o">)</span> 22
localhost:6379&gt; GET b
<span class="s2">"test not existsXXXXXXX"</span>
localhost:6379&gt;
</code></pre></div></div>

<h3 id="list类型">List类型</h3>

<blockquote>
  <p>List类型是按照插入顺序排序的字符串链表。和普通链表一样，可以在其头部和尾部添加新的元素。<strong>插入时，如果该键不存在，将为该键创建一个新的链表。与此相反，如果链表中所有的元素均被移除，那么该键也将会被从数据库中删除</strong>。List中可以包含的<strong>最大元素数量是4294967295</strong>。</p>

  <p>从元素插入和删除的效率来看，<strong>如果我们是在链表的两头插入或删除元素，这将会是非常高效的操作</strong>，即使链表中已经存储了百万条记录，该操作也可以在常量时间内完成。<strong>如果元素插入或删除操作是作用于链表中间，那将会是非常低效的</strong>。</p>
</blockquote>

<h4 id="rpushlpush">RPUSH/LPUSH</h4>

<blockquote>
  <p>将一个或多个值放入 <code class="language-plaintext highlighter-rouge">List</code>中，<code class="language-plaintext highlighter-rouge">RPUSH</code> 新加入的元素将放在 <code class="language-plaintext highlighter-rouge">List</code> 链表尾部(右)，<code class="language-plaintext highlighter-rouge">LPUSH</code> 同理放在左边，<strong>如果对应的 <code class="language-plaintext highlighter-rouge">List</code> 的 <code class="language-plaintext highlighter-rouge">key</code> 不存在，将自动创建一个 <code class="language-plaintext highlighter-rouge">List</code>，并将值放入 <code class="language-plaintext highlighter-rouge">List</code> 中</strong>；<strong>当 <code class="language-plaintext highlighter-rouge">key</code> 存在，且不是 <code class="language-plaintext highlighter-rouge">List</code> 类型时，将返回错误</strong>。</p>
</blockquote>

<p><strong>可接受的语法</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>RPUSH/LPUSH KEY VALUE1 VALUE2 VALUE3    <span class="c"># 同时放入多个值</span>
RPUSH/LPUSH KEY VALUE                   <span class="c"># 每次只放入一个值</span>
</code></pre></div></div>

<p><strong>代码示例</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>localhost:6379&gt; RPUSH list1 1 2 3 4
<span class="o">(</span>integer<span class="o">)</span> 4
localhost:6379&gt; LRANGE list1 0 <span class="nt">-1</span>       <span class="c"># 获取List所有值</span>
1<span class="o">)</span> <span class="s2">"1"</span>
2<span class="o">)</span> <span class="s2">"2"</span>
3<span class="o">)</span> <span class="s2">"3"</span>
4<span class="o">)</span> <span class="s2">"4"</span>
localhost:6379&gt;
</code></pre></div></div>

<h4 id="llen">LLEN</h4>

<blockquote>
  <p>返回指定 <code class="language-plaintext highlighter-rouge">List</code> 的长度，<strong>如果给定的 <code class="language-plaintext highlighter-rouge">KEY</code> 不存在则返回0，如果给定的 <code class="language-plaintext highlighter-rouge">KEY</code> 不是 <code class="language-plaintext highlighter-rouge">List</code> 类型将返回错误</strong>。</p>
</blockquote>

<p><strong>可接受的语法</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>LLEN KEY
</code></pre></div></div>

<p><strong>代码示例</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>localhost:6379&gt; LLEN list1
<span class="o">(</span>integer<span class="o">)</span> 4
localhost:6379&gt; LLEN L
<span class="o">(</span>integer<span class="o">)</span> 0
localhost:6379&gt;
</code></pre></div></div>

<h4 id="lrange">LRANGE</h4>

<blockquote>
  <p>返回指定返回的 <code class="language-plaintext highlighter-rouge">List</code> 的值，<strong>如果开始值大于 <code class="language-plaintext highlighter-rouge">List</code> 的长度，那么将返回空列表，如果结束值大于 <code class="language-plaintext highlighter-rouge">List</code> 长度，那么将示结束值为 <code class="language-plaintext highlighter-rouge">List</code> 最大长度</strong>。</p>
</blockquote>

<p><strong>可接受的语法</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>LRANGE KEY START END
</code></pre></div></div>

<p><strong>代码示例</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>localhost:6379&gt; LRANGE list1 0 3
1<span class="o">)</span> <span class="s2">"1"</span>
2<span class="o">)</span> <span class="s2">"2"</span>
3<span class="o">)</span> <span class="s2">"3"</span>
4<span class="o">)</span> <span class="s2">"4"</span>
localhost:6379&gt; LRANGE list1 10 11
<span class="o">(</span>empty list or <span class="nb">set</span><span class="o">)</span>
localhost:6379&gt; LRANGE list1 0 1000
1<span class="o">)</span> <span class="s2">"1"</span>
2<span class="o">)</span> <span class="s2">"2"</span>
3<span class="o">)</span> <span class="s2">"3"</span>
4<span class="o">)</span> <span class="s2">"4"</span>
</code></pre></div></div>

<h4 id="ltrim">LTRIM</h4>

<blockquote>
  <p>截取列表指定位置的元素，<strong>当Start值大于 <code class="language-plaintext highlighter-rouge">List</code> 长度时，将返回空列表；当End值大于 <code class="language-plaintext highlighter-rouge">List</code> 长度时，示End值为 <code class="language-plaintext highlighter-rouge">List</code> 长度</strong>。</p>
</blockquote>

<p><strong>可接受的语法</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>LTRIM KEY START END
</code></pre></div></div>

<p><strong>代码示例</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>localhost:6379&gt; RPUSH list 1 2 3 4 5 6 7 8 9 10
<span class="o">(</span>integer<span class="o">)</span> 10
localhost:6379&gt; LTRIM list 1 9
OK
localhost:6379&gt; LRANGE list 0 <span class="nt">-1</span>
1<span class="o">)</span> <span class="s2">"2"</span>
2<span class="o">)</span> <span class="s2">"3"</span>
3<span class="o">)</span> <span class="s2">"4"</span>
4<span class="o">)</span> <span class="s2">"5"</span>
5<span class="o">)</span> <span class="s2">"6"</span>
6<span class="o">)</span> <span class="s2">"7"</span>
7<span class="o">)</span> <span class="s2">"8"</span>
8<span class="o">)</span> <span class="s2">"9"</span>
9<span class="o">)</span> <span class="s2">"10"</span>
localhost:6379&gt; LTRIM list 5 100
OK
localhost:6379&gt; LRANGE list 0 <span class="nt">-1</span>
1<span class="o">)</span> <span class="s2">"7"</span>
2<span class="o">)</span> <span class="s2">"8"</span>
3<span class="o">)</span> <span class="s2">"9"</span>
4<span class="o">)</span> <span class="s2">"10"</span>
localhost:6379&gt; LTRIM list 50 100
OK
localhost:6379&gt; LRANGE list 0 <span class="nt">-1</span>
<span class="o">(</span>empty list or <span class="nb">set</span><span class="o">)</span>
localhost:6379&gt;
</code></pre></div></div>

<h4 id="lindex">LINDEX</h4>

<blockquote>
  <p>获取指定位置的值，<strong>超出位置(不在 <code class="language-plaintext highlighter-rouge">List</code> 范围内)返回nil</strong>。</p>
</blockquote>

<p><strong>可接受的语法</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>LINDEX KEY INDEX
</code></pre></div></div>

<p><strong>代码示例</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>localhost:6379&gt; RPUSH list 1 2 3 4 5 6 7 8 9
<span class="o">(</span>integer<span class="o">)</span> 9
localhost:6379&gt; LINDEX list 3
<span class="s2">"4"</span>
localhost:6379&gt; LINDEX list 100
<span class="o">(</span>nil<span class="o">)</span>
localhost:6379&gt;
</code></pre></div></div>

<h4 id="lrem">LREM</h4>

<blockquote>
  <p>移除列表中与指定值相等的元素，</p>

  <p><strong>在最新版本 3.0.6测试，无论下面的 count等于多少，都会移除所有目标值，只是搜索方向问题，尚不清楚原因</strong></p>
</blockquote>

<ul>
  <li>count &gt; 0 : 从表头开始向表尾搜索，移除与 value 相等的元素，数量为 count 。</li>
  <li>count &lt; 0 : 从表尾开始向表头搜索，移除与 value 相等的元素，数量为 count 的绝对值。</li>
  <li>count = 0 : 移除表中所有与 value 相等的值。</li>
</ul>

<p><strong>可接受的语法</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>LREM KEY COUNT VALUE
</code></pre></div></div>

<p><strong>代码示例</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>localhost:6379&gt; RPUSH list 0 0 xxx 0 xxx xxx 0 0 0 xxx 0
<span class="o">(</span>integer<span class="o">)</span> 11
localhost:6379&gt; LRANGE list 0 <span class="nt">-1</span>
 1<span class="o">)</span> <span class="s2">"0"</span>
 2<span class="o">)</span> <span class="s2">"0"</span>
 3<span class="o">)</span> <span class="s2">"xxx"</span>
 4<span class="o">)</span> <span class="s2">"0"</span>
 5<span class="o">)</span> <span class="s2">"xxx"</span>
 6<span class="o">)</span> <span class="s2">"xxx"</span>
 7<span class="o">)</span> <span class="s2">"0"</span>
 8<span class="o">)</span> <span class="s2">"0"</span>
 9<span class="o">)</span> <span class="s2">"0"</span>
10<span class="o">)</span> <span class="s2">"xxx"</span>
11<span class="o">)</span> <span class="s2">"0"</span>
localhost:6379&gt; LREM list 5 xxx
<span class="o">(</span>integer<span class="o">)</span> 4
localhost:6379&gt; LRANGE list 0 <span class="nt">-1</span>
1<span class="o">)</span> <span class="s2">"0"</span>
2<span class="o">)</span> <span class="s2">"0"</span>
3<span class="o">)</span> <span class="s2">"0"</span>
4<span class="o">)</span> <span class="s2">"0"</span>
5<span class="o">)</span> <span class="s2">"0"</span>
6<span class="o">)</span> <span class="s2">"0"</span>
7<span class="o">)</span> <span class="s2">"0"</span>
localhost:6379&gt; del list
<span class="o">(</span>integer<span class="o">)</span> 1
localhost:6379&gt; RPUSH list 0 0 xxx 0 xxx xxx 0 0 0 xxx 0
<span class="o">(</span>integer<span class="o">)</span> 11
localhost:6379&gt; LRANGE list 0 <span class="nt">-1</span>
 1<span class="o">)</span> <span class="s2">"0"</span>
 2<span class="o">)</span> <span class="s2">"0"</span>
 3<span class="o">)</span> <span class="s2">"xxx"</span>
 4<span class="o">)</span> <span class="s2">"0"</span>
 5<span class="o">)</span> <span class="s2">"xxx"</span>
 6<span class="o">)</span> <span class="s2">"xxx"</span>
 7<span class="o">)</span> <span class="s2">"0"</span>
 8<span class="o">)</span> <span class="s2">"0"</span>
 9<span class="o">)</span> <span class="s2">"0"</span>
10<span class="o">)</span> <span class="s2">"xxx"</span>
11<span class="o">)</span> <span class="s2">"0"</span>
localhost:6379&gt; LREM list 6 <span class="s2">"xxx"</span>
<span class="o">(</span>integer<span class="o">)</span> 4
localhost:6379&gt; LRANGE list 0 <span class="nt">-1</span>
1<span class="o">)</span> <span class="s2">"0"</span>
2<span class="o">)</span> <span class="s2">"0"</span>
3<span class="o">)</span> <span class="s2">"0"</span>
4<span class="o">)</span> <span class="s2">"0"</span>
5<span class="o">)</span> <span class="s2">"0"</span>
6<span class="o">)</span> <span class="s2">"0"</span>
7<span class="o">)</span> <span class="s2">"0"</span>
localhost:6379&gt; del list
<span class="o">(</span>integer<span class="o">)</span> 1
localhost:6379&gt; RPUSH list 0 0 xxx 0 xxx xxx 0 0 0 xxx 0
<span class="o">(</span>integer<span class="o">)</span> 11
localhost:6379&gt; LREM list <span class="nt">-6</span> <span class="s2">"xxx"</span>
<span class="o">(</span>integer<span class="o">)</span> 4
localhost:6379&gt; LRANGE list 0 <span class="nt">-1</span>
1<span class="o">)</span> <span class="s2">"0"</span>
2<span class="o">)</span> <span class="s2">"0"</span>
3<span class="o">)</span> <span class="s2">"0"</span>
4<span class="o">)</span> <span class="s2">"0"</span>
5<span class="o">)</span> <span class="s2">"0"</span>
6<span class="o">)</span> <span class="s2">"0"</span>
7<span class="o">)</span> <span class="s2">"0"</span>
localhost:6379&gt; del list
<span class="o">(</span>integer<span class="o">)</span> 1
localhost:6379&gt; RPUSH list 0 0 xxx 0 xxx xxx 0 0 0 xxx 0
<span class="o">(</span>integer<span class="o">)</span> 11
localhost:6379&gt; LREM list 0 <span class="s2">"xxx"</span>
<span class="o">(</span>integer<span class="o">)</span> 4
localhost:6379&gt; del list
<span class="o">(</span>integer<span class="o">)</span> 1
localhost:6379&gt; RPUSH list 0 0 xxx 0 xxx xxx 0 0 0 xxx 0
<span class="o">(</span>integer<span class="o">)</span> 11
localhost:6379&gt;
</code></pre></div></div>

<h4 id="lset">LSET</h4>

<blockquote>
  <p>向指定位置设置值，<strong>列表 <code class="language-plaintext highlighter-rouge">KEY</code> 不存在将返回错误，坐标不对返回对应错误信息</strong>。</p>
</blockquote>

<p><strong>可接受的语法</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>LSET KEY INDEX VALUE
</code></pre></div></div>

<p><strong>代码示例</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>localhost:6379&gt; RPUSH list 1 1 1 1 1
<span class="o">(</span>integer<span class="o">)</span> 5
localhost:6379&gt; LSET list 2 xxxx
OK
localhost:6379&gt; LRANGE list 0 <span class="nt">-1</span>
1<span class="o">)</span> <span class="s2">"1"</span>
2<span class="o">)</span> <span class="s2">"1"</span>
3<span class="o">)</span> <span class="s2">"xxxx"</span>
4<span class="o">)</span> <span class="s2">"1"</span>
5<span class="o">)</span> <span class="s2">"1"</span>
localhost:6379&gt;
</code></pre></div></div>

<h4 id="rpoplpushlpoprpush">RPOPLPUSH/LPOPRPUSH</h4>

<blockquote>
  <p>简单地说用于倒腾两个链表，<strong>RPOPLPUSH 将 A 链表最右侧一个元素删除并返回，同时将其放入到 B 链表最左侧</strong>，LPOPRPUSH 同理；<strong>测试最新版本 3.0.6 已经移除</strong>。</p>
</blockquote>

<p><strong>可接受的语法</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>LPOPRPUSH/RPOPLPUSH KEY1 SOURCE KEY2
</code></pre></div></div>
<h3 id="set类型">SET类型</h3>

<blockquote>
  <p><code class="language-plaintext highlighter-rouge">SET</code> 是一个无序的字符串合集，可以以O(1) 的时间复杂度完成 添加，删除以及测试元素是否存在的操作；<code class="language-plaintext highlighter-rouge">SET</code> 中不允许相同成员存在，<strong>向集合中多次添加同一元素，在集合中最终只会存在一个此元素。</strong>它支持一些服务端的命令进行集合运算。 我们可以在很短的时间内完成合并(<code class="language-plaintext highlighter-rouge">union</code>),求交(<code class="language-plaintext highlighter-rouge">intersection</code>)， 找出不同元素的操作。</p>
</blockquote>

<h4 id="sadd">SADD</h4>

<blockquote>
  <p>将一个或多个 <code class="language-plaintext highlighter-rouge">member(value)</code> 元素加入到集合 <code class="language-plaintext highlighter-rouge">key</code> 当中，已经存在于集合的 <code class="language-plaintext highlighter-rouge">member</code> 元素将被忽略。假如 <code class="language-plaintext highlighter-rouge">key</code> 不存在，则创建一个只包含 <code class="language-plaintext highlighter-rouge">member</code> 元素作成员的集合。当 <code class="language-plaintext highlighter-rouge">key</code> 不是集合类型时，返回一个错误。</p>

  <p><strong>在Redis2.4版本以前， SADD 只接受单个 member 值。</strong></p>
</blockquote>

<p><strong>可接受的语法</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SADD KEY MEMBER <span class="o">[</span>MEMBER...]
</code></pre></div></div>

<p><strong>代码示例</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>localhost:6379&gt; SADD set1 1 2 3 4
<span class="o">(</span>integer<span class="o">)</span> 4
localhost:6379&gt; SMEMBERS set1
1<span class="o">)</span> <span class="s2">"1"</span>
2<span class="o">)</span> <span class="s2">"2"</span>
3<span class="o">)</span> <span class="s2">"3"</span>
4<span class="o">)</span> <span class="s2">"4"</span>
localhost:6379&gt;
</code></pre></div></div>

<h4 id="srem">SREM</h4>

<blockquote>
  <p>移除集合 <code class="language-plaintext highlighter-rouge">key</code> 中的一个或多个 <code class="language-plaintext highlighter-rouge">member</code> 元素，不存在的 <code class="language-plaintext highlighter-rouge">member</code> 元素会被忽略。当 <code class="language-plaintext highlighter-rouge">key</code> 不是集合类型，返回一个错误。</p>

  <p><strong>在 Redis 2.4 版本以前， SREM 只接受单个 member 值。</strong></p>
</blockquote>

<p><strong>可接受的语法</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SREM KEY MEMBER <span class="o">[</span>MEMBER...]
</code></pre></div></div>

<p><strong>代码示例</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>localhost:6379&gt; SREM set1 1 2
<span class="o">(</span>integer<span class="o">)</span> 2
localhost:6379&gt; SMEMBERS set1
1<span class="o">)</span> <span class="s2">"3"</span>
2<span class="o">)</span> <span class="s2">"4"</span>
localhost:6379&gt;
</code></pre></div></div>

<h4 id="spop">SPOP</h4>

<blockquote>
  <p><strong>移除并返回集合中的一个随机元素。</strong>如果只想获取一个随机元素，但不想该元素从集合中被移除的话，可以使用 <code class="language-plaintext highlighter-rouge">SRANDMEMBER</code> 命令。被移除的随机元素当 <code class="language-plaintext highlighter-rouge">key</code> 不存在或 <code class="language-plaintext highlighter-rouge">key</code> 是空集时，返回 <code class="language-plaintext highlighter-rouge">nil</code> 。</p>
</blockquote>

<p><strong>可接受的语法</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SPOP KEY
</code></pre></div></div>

<p><strong>代码示例</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>localhost:6379&gt; SPOP set1
<span class="s2">"3"</span>
localhost:6379&gt; SMEMBERS set1
1<span class="o">)</span> <span class="s2">"4"</span>
localhost:6379&gt; SPOP set2
<span class="o">(</span>nil<span class="o">)</span>
localhost:6379&gt;
</code></pre></div></div>

<h4 id="smove">SMOVE</h4>

<blockquote>
  <p>将 <code class="language-plaintext highlighter-rouge">member</code> 元素从 <code class="language-plaintext highlighter-rouge">source</code> 集合移动到 <code class="language-plaintext highlighter-rouge">destination</code> 集合；<strong><code class="language-plaintext highlighter-rouge">SMOVE</code> 是原子性操作。</strong>
如果 <code class="language-plaintext highlighter-rouge">source</code> 集合不存在或不包含指定的 <code class="language-plaintext highlighter-rouge">member</code> 元素，则 <code class="language-plaintext highlighter-rouge">SMOVE</code> 命令不执行任何操作，仅返回 0 。否则， <code class="language-plaintext highlighter-rouge">member</code> 元素从 <code class="language-plaintext highlighter-rouge">source</code> 集合中被移除，并添加到 <code class="language-plaintext highlighter-rouge">destination</code> 集合中去。当 <code class="language-plaintext highlighter-rouge">destination</code> 集合已经包含 <code class="language-plaintext highlighter-rouge">member</code> 元素时， <code class="language-plaintext highlighter-rouge">SMOVE</code> 命令只是简单地将 <code class="language-plaintext highlighter-rouge">source</code> 集合中的 <code class="language-plaintext highlighter-rouge">member</code> 元素删除。当 <code class="language-plaintext highlighter-rouge">source</code> 或 <code class="language-plaintext highlighter-rouge">destination</code> 不是集合类型时，返回一个错误。</p>
</blockquote>

<p><strong>可接受的语法</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SMOVE SOURCE DESTINATION MEMBER
</code></pre></div></div>

<p><strong>代码示例</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>localhost:6379&gt; SADD set1 1 2 3 4
<span class="o">(</span>integer<span class="o">)</span> 4
localhost:6379&gt; SADD set2 5 6 7 8
<span class="o">(</span>integer<span class="o">)</span> 4
localhost:6379&gt; SMOVE set1 set2 4
<span class="o">(</span>integer<span class="o">)</span> 1
localhost:6379&gt; SMEMBERS set2
1<span class="o">)</span> <span class="s2">"4"</span>
2<span class="o">)</span> <span class="s2">"5"</span>
3<span class="o">)</span> <span class="s2">"6"</span>
4<span class="o">)</span> <span class="s2">"7"</span>
5<span class="o">)</span> <span class="s2">"8"</span>
localhost:6379&gt; SMEMBERS set1
1<span class="o">)</span> <span class="s2">"1"</span>
2<span class="o">)</span> <span class="s2">"2"</span>
3<span class="o">)</span> <span class="s2">"3"</span>
localhost:6379&gt;
</code></pre></div></div>

<h4 id="scard">SCARD</h4>

<blockquote>
  <p>返回指定结合的元素数量</p>
</blockquote>

<p><strong>可接受的语法</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SCARD KEY
</code></pre></div></div>

<p><strong>代码示例</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>localhost:6379&gt; SCARD set2
<span class="o">(</span>integer<span class="o">)</span> 5
localhost:6379&gt;
</code></pre></div></div>

<h4 id="sismember">SISMEMBER</h4>

<blockquote>
  <p>判断指定元素是否存在与集合中；如果 <code class="language-plaintext highlighter-rouge">member</code> 元素是集合的成员，返回 1 。如果 <code class="language-plaintext highlighter-rouge">member</code> 元素不是集合的成员，或 <code class="language-plaintext highlighter-rouge">key</code> 不存在，返回 0 。</p>
</blockquote>

<p><strong>可接受的语法</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SISMEMBER KEY
</code></pre></div></div>

<p><strong>代码示例</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>localhost:6379&gt; SISMEMBER set2 5
<span class="o">(</span>integer<span class="o">)</span> 1
localhost:6379&gt; SISMEMBER set2 999
<span class="o">(</span>integer<span class="o">)</span> 0
localhost:6379&gt;
</code></pre></div></div>

<h4 id="sinter">SINTER</h4>

<blockquote>
  <p>返回多个集合的交集，<strong>不存在的KEY将视为空集，与空集进行取交集操作将返回空集。</strong></p>
</blockquote>

<p><strong>可接受的语法</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SINTER KEY1 KEY2 ...
</code></pre></div></div>

<p><strong>代码示例</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>localhost:6379&gt;
localhost:6379&gt; SADD set1 1 2 3
<span class="o">(</span>integer<span class="o">)</span> 3
localhost:6379&gt; SADD set2 2 3 4
<span class="o">(</span>integer<span class="o">)</span> 3
localhost:6379&gt; SINTER set1 set2
1<span class="o">)</span> <span class="s2">"2"</span>
2<span class="o">)</span> <span class="s2">"3"</span>
localhost:6379&gt; SINTER set1 set44444
<span class="o">(</span>empty list or <span class="nb">set</span><span class="o">)</span>
localhost:6379&gt; SADD set3 2 5 6
<span class="o">(</span>integer<span class="o">)</span> 3
localhost:6379&gt; SINTER set1 set2 set3
1<span class="o">)</span> <span class="s2">"2"</span>
localhost:6379&gt;
</code></pre></div></div>

<h4 id="sinterstore">SINTERSTORE</h4>

<blockquote>
  <p>基本同上，但是 <code class="language-plaintext highlighter-rouge">SINTERSTORE</code>可以将取出的交集保存到指定集合中。</p>
</blockquote>

<p><strong>可接受的语法</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SINTERSTORE DESTINATION SOURCE1 SOURCE2 ...
</code></pre></div></div>

<p><strong>代码示例</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>localhost:6379&gt; SADD SET1 1 2 3
<span class="o">(</span>integer<span class="o">)</span> 3
localhost:6379&gt; SADD SET2 2 3 4
<span class="o">(</span>integer<span class="o">)</span> 3
localhost:6379&gt; SADD SET3 3 4 5
<span class="o">(</span>integer<span class="o">)</span> 3
localhost:6379&gt; SINTERSTORE SET4 SET1 SET2 SET3
<span class="o">(</span>integer<span class="o">)</span> 1
localhost:6379&gt; SMEMBERS SET4
1<span class="o">)</span> <span class="s2">"3"</span>
localhost:6379&gt;
</code></pre></div></div>

<h4 id="sunion">SUNION</h4>

<blockquote>
  <p>取指定集合的并集</p>
</blockquote>

<p><strong>可接受的语法</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SUNION KEY1 KEY2 ...
</code></pre></div></div>

<p><strong>代码示例</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>localhost:6379&gt; SADD SET1 1 2 3
<span class="o">(</span>integer<span class="o">)</span> 3
localhost:6379&gt; SADD SET2 2 3 4
<span class="o">(</span>integer<span class="o">)</span> 3
localhost:6379&gt; SADD SET3 3 4 5
<span class="o">(</span>integer<span class="o">)</span> 3
localhost:6379&gt; SUNION SET1 SET2 SET3
1<span class="o">)</span> <span class="s2">"1"</span>
2<span class="o">)</span> <span class="s2">"2"</span>
3<span class="o">)</span> <span class="s2">"3"</span>
4<span class="o">)</span> <span class="s2">"4"</span>
5<span class="o">)</span> <span class="s2">"5"</span>
localhost:6379&gt;
</code></pre></div></div>

<h4 id="sunionstore">SUNIONSTORE</h4>

<blockquote>
  <p>同 <code class="language-plaintext highlighter-rouge">SINTERSTORE</code>；不做阐述</p>
</blockquote>

<h4 id="sdiff">SDIFF</h4>

<blockquote>
  <p>取指定集合的差集，同 <code class="language-plaintext highlighter-rouge">SINTER</code>、<code class="language-plaintext highlighter-rouge">SUNION</code></p>
</blockquote>

<p><strong>可接受的语法</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SDIFF KEY1 KEY2 ...
</code></pre></div></div>

<p><strong>代码示例</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>localhost:6379&gt; SADD SET1 1 2 3
<span class="o">(</span>integer<span class="o">)</span> 3
localhost:6379&gt; SADD SET2 2 3 4
<span class="o">(</span>integer<span class="o">)</span> 3
localhost:6379&gt; SADD SET3 3 4 5
<span class="o">(</span>integer<span class="o">)</span> 3
localhost:6379&gt; SDIFF SET1 SET2 SET3
1<span class="o">)</span> <span class="s2">"1"</span>
localhost:6379&gt;
</code></pre></div></div>

<blockquote>
  <p><strong>对于集合的 合集、差集、并集操作，中文API的解释是 <code class="language-plaintext highlighter-rouge">返回一个集合的全部成员</code>，我的理解是，以第一个集合为准，返回的总是这个结合依次与后续集合运算的结果，并忽略后面集合的元素；具体还是不算太理解……以后研究</strong></p>
</blockquote>

<h3 id="zset">ZSET</h3>

<blockquote>
  <p>和Set类型极为相似，它们都是字符串的集合，都不允许重复的成员出现在一个Set中。它们之间的主要差别是zset中的每一个成员都会有一个分数(score)与之关联，Redis正是通过分数来为集合中的成员进行从小到大的排序。然而需要额外指出的是，尽管zset中的成员必须是唯一的，但是分数(score)却是可以重复的。
在zset中添加、删除或更新一个成员都是非常快速的操作，其时间复杂度为集合中成员数量的对数。由于zset中的成员在集合中的位置是有序的，因此，即便是访问位于集合中部的成员也仍然是非常高效的。事实上，Redis所具有的这一特征在很多其它类型的数据库中是很难实现的，换句话说，在该点上要想达到和Redis同样的高效，在其它数据库中进行建模是非常困难的。</p>
</blockquote>

<h4 id="zadd">ZADD</h4>

<blockquote>
  <p>将一个或多个 <code class="language-plaintext highlighter-rouge">member</code> 元素及其 <code class="language-plaintext highlighter-rouge">score</code> 值加入到有序集 key 当中。如果某个 <code class="language-plaintext highlighter-rouge">member</code> 已经是有序集的成员，那么更新这个 <code class="language-plaintext highlighter-rouge">member</code> 的 <code class="language-plaintext highlighter-rouge">score</code> 值，并通过重新插入这个 <code class="language-plaintext highlighter-rouge">member</code> 元素，来保证该 <code class="language-plaintext highlighter-rouge">member</code> 在正确的位置上，<strong>同时返回0</strong>。<code class="language-plaintext highlighter-rouge">score</code> 值可以是整数值或双精度浮点数。如果 <code class="language-plaintext highlighter-rouge">key</code> 不存在，则创建一个空的有序集并执行 <code class="language-plaintext highlighter-rouge">ZADD</code> 操作。当 <code class="language-plaintext highlighter-rouge">key</code> 存在但不是有序集类型时，返回一个错误。</p>
</blockquote>

<p><strong>可接受的语法</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ZADD KEY SCORE VALUE <span class="o">[</span>SCORE VALUE ...]
</code></pre></div></div>

<p><strong>代码示例</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>localhost:6379&gt; ZADD ZSET1 1 <span class="s2">"TEST1"</span>
<span class="o">(</span>integer<span class="o">)</span> 1
localhost:6379&gt; ZADD ZSET1 2 <span class="s2">"TEST2"</span> 3 <span class="s2">"TEST3"</span>
<span class="o">(</span>integer<span class="o">)</span> 2
localhost:6379&gt; ZRANGE ZSET1 0 <span class="nt">-1</span> WITHSCORES
1<span class="o">)</span> <span class="s2">"TEST1"</span>
2<span class="o">)</span> <span class="s2">"1"</span>
3<span class="o">)</span> <span class="s2">"TEST2"</span>
4<span class="o">)</span> <span class="s2">"2"</span>
5<span class="o">)</span> <span class="s2">"TEST3"</span>
6<span class="o">)</span> <span class="s2">"3"</span>
localhost:6379&gt; ZADD ZSET1 1 <span class="s2">"TEST10000"</span>
<span class="o">(</span>integer<span class="o">)</span> 1
localhost:6379&gt; ZADD ZSET1 1 <span class="s2">"TEST10000"</span>
<span class="o">(</span>integer<span class="o">)</span> 0
localhost:6379&gt;
</code></pre></div></div>

<h4 id="zcard">ZCARD</h4>

<blockquote>
  <p>返回集合的长度</p>
</blockquote>

<p><strong>可接受的语法</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ZCARD KEY
</code></pre></div></div>

<p><strong>代码示例</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>localhost:6379&gt; ZCARD ZSET1
<span class="o">(</span>integer<span class="o">)</span> 4
localhost:6379&gt;
</code></pre></div></div>

<h4 id="zcount">ZCOUNT</h4>

<blockquote>
  <p>返回指定 <code class="language-plaintext highlighter-rouge">SCORE</code> 之间的元素数量</p>
</blockquote>

<p><strong>可接受的语法</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ZCOUNT KEY MIN MAX
</code></pre></div></div>

<p><strong>代码示例</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>localhost:6379&gt; ZCOUNT ZSET1 1 3
<span class="o">(</span>integer<span class="o">)</span> 4
localhost:6379&gt;
</code></pre></div></div>

<h4 id="zscore">ZSCORE</h4>

<blockquote>
  <p>查看指定成员的 <code class="language-plaintext highlighter-rouge">SCORE</code></p>
</blockquote>

<p><strong>可接受的语法</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ZSCORE KEY VALUE
</code></pre></div></div>

<p><strong>代码示例</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>localhost:6379&gt; ZSCORE ZSET1 <span class="s2">"TEST2"</span>
<span class="s2">"2"</span>
localhost:6379&gt;
</code></pre></div></div>

<h4 id="zincrby">ZINCRBY</h4>

<blockquote>
  <p>对集合中指定 <code class="language-plaintext highlighter-rouge">VALUE</code> 的 <code class="language-plaintext highlighter-rouge">SROCE</code> 加上指定值；当集合 <code class="language-plaintext highlighter-rouge">KEY</code> 不存在时，相当于 <code class="language-plaintext highlighter-rouge">ZADD</code>。</p>
</blockquote>

<p><strong>可接受的语法</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ZINCRBY KEY INCREMENT VALUE
</code></pre></div></div>

<p><strong>代码示例</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>localhost:6379&gt; ZINCRBY ZSET1 <span class="nt">-1</span> <span class="s2">"TEST3"</span>
<span class="s2">"2"</span>
localhost:6379&gt; ZSCORE ZSET1 <span class="s2">"TEST3"</span>
<span class="s2">"2"</span>
localhost:6379&gt;
</code></pre></div></div>

<h4 id="zrange">ZRANGE</h4>

<blockquote>
  <p>返回集合内指定区间的元素，其中成员的位置按 score 值递增(从小到大)来排序。具有相同 <code class="language-plaintext highlighter-rouge">score</code> 值的成员按字典序( <code class="language-plaintext highlighter-rouge">lexicographical order</code> )来排列。如果需要成员按 <code class="language-plaintext highlighter-rouge">score</code> 值递减(从大到小)来排列，请使用 <code class="language-plaintext highlighter-rouge">ZREVRANGE</code> 命令。</p>
</blockquote>

<p><strong>可接受的语法</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ZRANGE KEY START STOP <span class="o">[</span>WITHSCORES]
</code></pre></div></div>

<p><strong>代码示例</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>localhost:6379&gt; ZADD ZSET1 1 <span class="s2">"TEST1"</span> 2 <span class="s2">"TEST2"</span> 3 <span class="s2">"TEST3"</span> 4 <span class="s2">"TEST4"</span> 5 <span class="s2">"TEST5"</span>
<span class="o">(</span>integer<span class="o">)</span> 5
localhost:6379&gt; ZRANGE ZSET1 0 <span class="nt">-1</span>
1<span class="o">)</span> <span class="s2">"TEST1"</span>
2<span class="o">)</span> <span class="s2">"TEST2"</span>
3<span class="o">)</span> <span class="s2">"TEST3"</span>
4<span class="o">)</span> <span class="s2">"TEST4"</span>
5<span class="o">)</span> <span class="s2">"TEST5"</span>
localhost:6379&gt;
</code></pre></div></div>
<h4 id="zrevrange">ZREVRANGE</h4>

<blockquote>
  <p>同 <code class="language-plaintext highlighter-rouge">ZRANGE</code> 只不过 <code class="language-plaintext highlighter-rouge">SCORE</code> 从大到小排列，略过</p>
</blockquote>

<h4 id="zrangebyscore">ZRANGEBYSCORE</h4>
<blockquote>
  <p>基本同 <code class="language-plaintext highlighter-rouge">ZRANGE</code> 一样，但是返回分数在 <code class="language-plaintext highlighter-rouge">min</code> 和 <code class="language-plaintext highlighter-rouge">max</code> 之间的所有成员满足表达式 <code class="language-plaintext highlighter-rouge">min &lt;= score &lt;= max</code> 的成员，其中返回的成员是按照其分数从低到高的顺序返回，<strong>如果成员具有相同的分数，则按成员的字典顺序返回。</strong></p>

  <p><code class="language-plaintext highlighter-rouge">(</code> 表示小于，默认 包含 <code class="language-plaintext highlighter-rouge">min</code> 和 <code class="language-plaintext highlighter-rouge">max</code>；极限 <code class="language-plaintext highlighter-rouge">min</code> 和 <code class="language-plaintext highlighter-rouge">max</code> 可以用 <code class="language-plaintext highlighter-rouge">-inf</code> 和 <code class="language-plaintext highlighter-rouge">+inf</code> 表示</p>
</blockquote>

<p><strong>可接受的语法</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ZRANGEBYSCORE KEY <span class="o">[(]</span>MIN <span class="o">[(]</span>MAX <span class="o">[</span>WITHSCORES]
</code></pre></div></div>

<p><strong>代码示例</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>localhost:6379&gt; ZADD ZSET1 1 <span class="s2">"TEST1"</span> 2 <span class="s2">"TEST2"</span> 3 <span class="s2">"TEST3"</span> 4 <span class="s2">"TEST4"</span> 5 <span class="s2">"TEST5"</span> 6 <span class="s2">"TEST6"</span>
<span class="o">(</span>integer<span class="o">)</span> 6
localhost:6379&gt; ZRANGEBYSCORE ZSET1 <span class="o">(</span>2 5 WITHSCORES
1<span class="o">)</span> <span class="s2">"TEST3"</span>
2<span class="o">)</span> <span class="s2">"3"</span>
3<span class="o">)</span> <span class="s2">"TEST4"</span>
4<span class="o">)</span> <span class="s2">"4"</span>
5<span class="o">)</span> <span class="s2">"TEST5"</span>
6<span class="o">)</span> <span class="s2">"5"</span>
localhost:6379&gt; ZRANGEBYSCORE ZSET1 2 +INF WITHSCORES
 1<span class="o">)</span> <span class="s2">"TEST2"</span>
 2<span class="o">)</span> <span class="s2">"2"</span>
 3<span class="o">)</span> <span class="s2">"TEST3"</span>
 4<span class="o">)</span> <span class="s2">"3"</span>
 5<span class="o">)</span> <span class="s2">"TEST4"</span>
 6<span class="o">)</span> <span class="s2">"4"</span>
 7<span class="o">)</span> <span class="s2">"TEST5"</span>
 8<span class="o">)</span> <span class="s2">"5"</span>
 9<span class="o">)</span> <span class="s2">"TEST6"</span>
10<span class="o">)</span> <span class="s2">"6"</span>
localhost:6379&gt;
</code></pre></div></div>

<h4 id="zrank">ZRANK</h4>

<blockquote>
  <p>返回指定成员位置</p>
</blockquote>

<p><strong>可接受的语法</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ZRANK KEY VALUE
</code></pre></div></div>

<p><strong>代码示例</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>localhost:6379&gt; ZRANK ZSET1 <span class="s2">"TEST3"</span>
<span class="o">(</span>integer<span class="o">)</span> 2
localhost:6379&gt;
</code></pre></div></div>

<h3 id="zrem">ZREM</h3>

<blockquote>
  <p>删除指定元素</p>
</blockquote>

<p><strong>可接受的语法</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ZREM KEY VALUE
</code></pre></div></div>

<p><strong>代码示例</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>localhost:6379&gt; ZREM ZSET1 <span class="s2">"TEST5"</span>
<span class="o">(</span>integer<span class="o">)</span> 1
localhost:6379&gt; ZRANGE ZSET1 1 <span class="nt">-1</span> WITHSCORES
1<span class="o">)</span> <span class="s2">"TEST2"</span>
2<span class="o">)</span> <span class="s2">"2"</span>
3<span class="o">)</span> <span class="s2">"TEST3"</span>
4<span class="o">)</span> <span class="s2">"3"</span>
5<span class="o">)</span> <span class="s2">"TEST4"</span>
6<span class="o">)</span> <span class="s2">"4"</span>
7<span class="o">)</span> <span class="s2">"TEST6"</span>
8<span class="o">)</span> <span class="s2">"6"</span>
localhost:6379&gt;
</code></pre></div></div>

<h4 id="zscore-1">ZSCORE</h4>

<blockquote>
  <p>获取指定元素的 分数，如果该成员存在，以字符串的形式返回其分数，否则返回nil。</p>
</blockquote>

<p><strong>可接受的语法</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ZSCORE KEY VALUE
</code></pre></div></div>

<p><strong>代码示例</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>localhost:6379&gt; ZSCORE ZSET1 <span class="s2">"TEST2"</span>
<span class="s2">"2"</span>
localhost:6379&gt;
</code></pre></div></div>

<h4 id="zrevrangebyscore">ZREVRANGEBYSCORE</h4>

<blockquote>
  <p>除了排序方式是基于从高到低的分数排序之外，其它功能和参数含义均与 <code class="language-plaintext highlighter-rouge">ZRANGEBYSCORE</code> 相同。</p>
</blockquote>

<h4 id="zremrangebyrank">ZREMRANGEBYRANK</h4>

<blockquote>
  <p>删除索引位置位于 <code class="language-plaintext highlighter-rouge">start</code> 和 <code class="language-plaintext highlighter-rouge">stop</code> 之间的成员，<code class="language-plaintext highlighter-rouge">start</code> 和 <code class="language-plaintext highlighter-rouge">stop</code> 都是 <code class="language-plaintext highlighter-rouge">0-based</code>，即 <code class="language-plaintext highlighter-rouge">0</code> 表示分数最低的成员，<code class="language-plaintext highlighter-rouge">-1</code> 表示最后一个成员，即分数最高的成员。</p>
</blockquote>

<h4 id="zremrangebyscore">ZREMRANGEBYSCORE</h4>

<blockquote>
  <p>删除分数在 <code class="language-plaintext highlighter-rouge">min</code> 和 <code class="language-plaintext highlighter-rouge">max</code> 之间的所有成员，即满足表达式 <code class="language-plaintext highlighter-rouge">min &lt;= score &lt;= max</code> 的所有成员。</p>
</blockquote>

<h3 id="hashes类型">Hashes类型</h3>

<blockquote>
  <p>可以将 <code class="language-plaintext highlighter-rouge">Redis</code> 中的 <code class="language-plaintext highlighter-rouge">Hashes</code> 类型看成具有 <code class="language-plaintext highlighter-rouge">String Key</code> 和 <code class="language-plaintext highlighter-rouge">String Value</code> 的 <code class="language-plaintext highlighter-rouge">map</code> 容器。所以该类型非常适合于存储值对象的信息。如 <code class="language-plaintext highlighter-rouge">Username</code>、<code class="language-plaintext highlighter-rouge">Password</code> 和 <code class="language-plaintext highlighter-rouge">Age</code> 等。如果 <code class="language-plaintext highlighter-rouge">Hash</code> 中包含很少的字段，那么该类型的数据也将仅占用很少的磁盘空间。每一个 <code class="language-plaintext highlighter-rouge">Hash</code> 可以存储 <code class="language-plaintext highlighter-rouge">4294967295</code> 个键值对。</p>
</blockquote>

<h4 id="hset">HSET</h4>

<blockquote>
  <p>将哈希表 key 中的域 field 的值设为 value 。如果 key 不存在，一个新的哈希表被创建并进行 HSET 操作。如果域 field 已经存在于哈希表中，旧值将被覆盖。</p>
</blockquote>

<p><strong>可接受的语法</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HSET KEY FIELD1 VALUE1
</code></pre></div></div>

<p><strong>代码示例</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>localhost:6379&gt; HSET USER1 NAME <span class="s2">"ZAHNGSAN"</span>
<span class="o">(</span>integer<span class="o">)</span> 1
</code></pre></div></div>

<h4 id="hsetnx">HSETNX</h4>

<blockquote>
  <p>将哈希表 key 中的域 field 的值设置为 value ，当且仅当域 field 不存在。<strong>若域 field 已经存在，该操作无效。</strong>如果 key 不存在，一个新哈希表被创建并执行 HSETNX 命令。</p>
</blockquote>

<p><strong>可接受的语法</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HSETNX KEY FIELD VALUE
</code></pre></div></div>

<p><strong>代码示例</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>localhost:6379&gt; HSETNX USER1 AGE 10
<span class="o">(</span>integer<span class="o">)</span> 1
localhost:6379&gt; HGET USER1 AGE
<span class="s2">"10"</span>
localhost:6379&gt; HSETNX USER1 NAME <span class="s2">"LISI"</span>
<span class="o">(</span>integer<span class="o">)</span> 0
localhost:6379&gt; HGET USER1 NAME
<span class="s2">"ZAHNGSAN"</span>
localhost:6379&gt;
</code></pre></div></div>

<h4 id="hget">HGET</h4>

<blockquote>
  <p>返回 key 中指定 field 的 value</p>
</blockquote>

<p><strong>可接受的语法</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HGET KEY FIELD
</code></pre></div></div>

<p><strong>代码示例</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>localhost:6379&gt; HGET USER1 NAME
<span class="s2">"ZAHNGSAN"</span>
localhost:6379&gt;
</code></pre></div></div>

<h4 id="hgetall">HGETALL</h4>

<blockquote>
  <p>获取指定 key 中全部 field 和 value</p>
</blockquote>

<p><strong>可接受的语法</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HGETALL KEY
</code></pre></div></div>

<p><strong>代码示例</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>localhost:6379&gt; HGETALL USER1
1<span class="o">)</span> <span class="s2">"NAME"</span>
2<span class="o">)</span> <span class="s2">"ZAHNGSAN"</span>
3<span class="o">)</span> <span class="s2">"AGE"</span>
4<span class="o">)</span> <span class="s2">"10"</span>
localhost:6379&gt;
</code></pre></div></div>

<h4 id="hexists">HEXISTS</h4>

<blockquote>
  <p>判断指定的 key 中的 field 是否存在，1表示存在，0表示 <strong>参数中的Field或Key不存在。</strong></p>
</blockquote>

<p><strong>可接受的语法</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HEXISTS KEY FIELD
</code></pre></div></div>

<p><strong>代码示例</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>localhost:6379&gt; HEXISTS USER1 NAME
<span class="o">(</span>integer<span class="o">)</span> 1
localhost:6379&gt; HEXISTS USER1 ADDRESS
<span class="o">(</span>integer<span class="o">)</span> 0
localhost:6379&gt; HEXISTS USER2 NAME
<span class="o">(</span>integer<span class="o">)</span> 0
localhost:6379&gt;
</code></pre></div></div>

<h4 id="hlen">HLEN</h4>

<blockquote>
  <p>获取指定 key 中的 field 数量，当 key 不存在时，返回 0 。</p>
</blockquote>

<p><strong>可接受的语法</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HLEN KEY
</code></pre></div></div>

<p><strong>代码示例</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>localhost:6379&gt; HLEN USER1
<span class="o">(</span>integer<span class="o">)</span> 2
localhost:6379&gt;
</code></pre></div></div>

<h4 id="hkeys">HKEYS</h4>

<blockquote>
  <p>返回指定 key 中的 所有 field，当 key 不存在时，返回一个空表。</p>
</blockquote>

<p><strong>可接受的语法</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HKEYS KEY
</code></pre></div></div>

<p><strong>代码示例</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>localhost:6379&gt; HKEYS USER1
1<span class="o">)</span> <span class="s2">"NAME"</span>
2<span class="o">)</span> <span class="s2">"AGE"</span>
localhost:6379&gt;
</code></pre></div></div>

<h4 id="hvals">HVALS</h4>

<blockquote>
  <p>返回指定 key 中所有 field 的 value，当 key 不存在时，返回一个空表。</p>
</blockquote>

<p><strong>可接受的语法</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HVALS KEY
</code></pre></div></div>

<p><strong>代码示例</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>localhost:6379&gt; HVALS USER1
1<span class="o">)</span> <span class="s2">"ZAHNGSAN"</span>
2<span class="o">)</span> <span class="s2">"10"</span>
localhost:6379&gt;
</code></pre></div></div>

<h4 id="hdel">HDEL</h4>

<blockquote>
  <p>删除指定 key 中的一个或多个 field，返回被成功移除的域的数量，不包括被忽略的域。<strong>在Redis2.4以下的版本里， HDEL 每次只能删除单个域，如果你需要在一个原子时间内删除多个域，请将命令包含在 MULTI / EXEC 块内。</strong></p>
</blockquote>

<p><strong>可接受的语法</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HDEL KEY FIELD1 <span class="o">[</span>FIELD2 ...]
</code></pre></div></div>

<p><strong>代码示例</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>localhost:6379&gt; HDEL USER1 NAME AGE
<span class="o">(</span>integer<span class="o">)</span> 2
localhost:6379&gt; HGETALL USER1
1<span class="o">)</span> <span class="s2">"ADDRESS"</span>
2<span class="o">)</span> <span class="s2">"CHINA"</span>
localhost:6379&gt;
</code></pre></div></div>

<h4 id="hmset">HMSET</h4>

<blockquote>
  <p>设置指定 key 的多个 field 对应的 value；此命令会覆盖哈希表中已存在的域。如果 key 不存在，一个空哈希表被创建并执行 HMSET 操作。</p>
</blockquote>

<p><strong>可接受的语法</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HMSET KEY FIELD1 VALUE1 <span class="o">[</span>FIELD2 VALUE2...]
</code></pre></div></div>

<p><strong>代码示例</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>localhost:6379&gt; HMSET USER NAME <span class="s2">"ZHANGSAN"</span> AGE 10 ADDRESS <span class="s2">"CHINA"</span>
OK
localhost:6379&gt; HGETALL USER
1<span class="o">)</span> <span class="s2">"NAME"</span>
2<span class="o">)</span> <span class="s2">"ZHANGSAN"</span>
3<span class="o">)</span> <span class="s2">"AGE"</span>
4<span class="o">)</span> <span class="s2">"10"</span>
5<span class="o">)</span> <span class="s2">"ADDRESS"</span>
6<span class="o">)</span> <span class="s2">"CHINA"</span>
localhost:6379&gt;
</code></pre></div></div>

<h4 id="hmget">HMGET</h4>

<blockquote>
  <p>获取指定 key 中的 多个 field 的 value</p>
</blockquote>

<p><strong>可接受的语法</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HMGET KEY FIELD1 <span class="o">[</span>FIELD2 ...]
</code></pre></div></div>

<p><strong>代码示例</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>localhost:6379&gt; HMGET USER NAME AGE
1<span class="o">)</span> <span class="s2">"ZHANGSAN"</span>
2<span class="o">)</span> <span class="s2">"10"</span>
localhost:6379&gt;
</code></pre></div></div>
<p>转载请注明出处，本文采用 <a href="http://creativecommons.org/licenses/by-nc-nd/4.0/">CC4.0</a> 协议授权</p>


                <hr style="visibility: hidden;">

                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/2016/01/11/Redis3-0-6%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85/" data-toggle="tooltip" data-placement="top" title="Redis3.0.6编译安装">
                        Previous<br>
                        <span>Redis3.0.6编译安装</span>
                        </a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/2016/01/13/%E6%88%91%E5%92%8C%E6%88%91%E7%9A%84%E5%80%94%E5%BC%BA/" data-toggle="tooltip" data-placement="top" title="我和我的倔强">
                        Next<br>
                        <span>我和我的倔强</span>
                        </a>
                    </li>
                    
                </ul>


                
                <!-- disqus 评论框 start -->
                <div class="comment">
                    <div id="disqus_thread" class="disqus-thread"></div>
                </div>
                <!-- disqus 评论框 end -->
                

                
            </div>  

    <!-- Side Catalog Container -->
        
            <div class="
                col-lg-2 col-lg-offset-0
                visible-lg-block
                sidebar-container
                catalog-container">
                <div class="side-catalog">
                    <hr class="hidden-sm hidden-xs">
                    <h5>
                        <a class="catalog-toggle" href="#">CATALOG</a>
                    </h5>
                    <ul class="catalog-body"></ul>
                </div>
            </div>
        

    <!-- Sidebar Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                
                <section>
                    <hr class="hidden-sm hidden-xs">
                    <h5><a href="/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
                        
                            
                                <a href="/tags/#Linux" title="Linux" rel="84">
                                    Linux
                                </a>
                            
                        
                            
                                <a href="/tags/#SQL" title="SQL" rel="4">
                                    SQL
                                </a>
                            
                        
                            
                                <a href="/tags/#Java" title="Java" rel="25">
                                    Java
                                </a>
                            
                        
                            
                                <a href="/tags/#随笔" title="随笔" rel="9">
                                    随笔
                                </a>
                            
                        
                            
                                <a href="/tags/#GitHub" title="GitHub" rel="3">
                                    GitHub
                                </a>
                            
                        
                            
                                <a href="/tags/#Docker" title="Docker" rel="44">
                                    Docker
                                </a>
                            
                        
                            
                                <a href="/tags/#Kubernetes" title="Kubernetes" rel="43">
                                    Kubernetes
                                </a>
                            
                        
                            
                                <a href="/tags/#CI/CD" title="CI/CD" rel="4">
                                    CI/CD
                                </a>
                            
                        
                            
                                <a href="/tags/#Golang" title="Golang" rel="6">
                                    Golang
                                </a>
                            
                        
                            
                                <a href="/tags/#Mac" title="Mac" rel="1">
                                    Mac
                                </a>
                            
                        
                            
                                <a href="/tags/#Podman" title="Podman" rel="1">
                                    Podman
                                </a>
                            
                        
                    </div>
                </section>
                

                <!-- Friends Blog -->
                
                <hr>
                <h5>FRIENDS</h5>
                <ul class="list-inline">
                    
                        <li><a href="http://mdba.cn">DBA的罗浮宫</a></li>
                    
                        <li><a href="http://www.xieyuxuan.cc">谢雨轩</a></li>
                    
                        <li><a href="https://ehlxr.me">Ehlxr's Blog</a></li>
                    
                        <li><a href="http://www.dearzd.com/DBlog">咚门</a></li>
                    
                        <li><a href="http://log.zvz.im">Z</a></li>
                    
                        <li><a href="https://www.4spaces.org">容休博客</a></li>
                    
                        <li><a href="http://www.webank.pw">幽鸿居</a></li>
                    
                        <li><a href="http://ephen.me">Ephen's Blog</a></li>
                    
                        <li><a href="https://www.maoxuner.cn">二次元の技术宅</a></li>
                    
                </ul>
                
            </div>
        </div>
    </div>
</article>






<!-- disqus 公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = "mritd";
    var disqus_identifier = "/2016/01/11/Redis学习笔记";
    var disqus_url = "https://mritd.me/2016/01/11/Redis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/";

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<!-- disqus 公共JS代码 end -->




<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
    async("//cdnjs.cloudflare.com/ajax/libs/anchor-js/1.1.1/anchor.min.js",function(){
        anchors.options = {
          visible: 'always',
          placement: 'right',
          icon: '#'
        };
        anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
    })
</script>
<style>
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link{
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top : -0.1em;
        }
    }
</style>



    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    
                    <li>
                        <a href="/feed.xml">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://twitter.com/mritd1234">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    

                    <!-- add Weibo, Zhihu by Hux, add target = "_blank" to <a> by Hux -->
                    
                    
                    
                    
                    <li>
                        <a target="_blank" href="https://t.me/mritd">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-telegram fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a target="_blank" href="https://github.com/mritd">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; 漠然 2020
                    <br>
                    Theme by <a href="http://huangxuan.me">Hux</a> |
                    <iframe
                        style="margin-left: 2px; margin-bottom:-5px;"
                        frameborder="0" scrolling="0" width="100px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=huxpro&repo=huxpro.github.io&type=star&count=true" >
                    </iframe>
                </p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<!-- Currently, only navbar scroll-down effect at desktop still depends on this -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/mritd-blog.min.js "></script>

<!-- Service Worker -->

<script src="/js/snackbar.js "></script>
<script src="/js/sw-registration.js "></script>


<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!--
     Because of the native support for backtick-style fenced code blocks
     right within the Markdown is landed in Github Pages,
     From V1.6, There is no need for Highlight.js,
     so Huxblog drops it officially.

     - https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0
     - https://help.github.com/articles/creating-and-highlighting-code-blocks/
     - https://github.com/jneen/rouge/wiki/list-of-supported-languages-and-lexers
-->
<!--
    <script>
        async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){
            hljs.initHighlightingOnLoad();
        })
    </script>
    <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">
-->


<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async('/js/jquery.tagcloud.js',function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->

<script>
    // dynamic User by Hux
    var _gaId = 'UA-82387173-1';
    var _gaDomain = 'mritd.me';

    // Originial
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', _gaId, _gaDomain);
    ga('send', 'pageview');
</script>




<!-- Side Catalog -->

<script type="text/javascript">
    function generateCatalog (selector) {

        // interop with multilangual 
        if (false) {
            _containerSelector = 'div.post-container.active'
        } else {
            _containerSelector = 'div.post-container'
        }

        // init
        var P = $(_containerSelector),a,n,t,l,i,c;
        a = P.find('h1,h2,h3,h4,h5,h6');

        // clean
        $(selector).html('')

        // appending
        a.each(function () {
            n = $(this).prop('tagName').toLowerCase();
            i = "#"+$(this).prop('id');
            t = $(this).text();
            c = $('<a href="'+i+'" rel="nofollow">'+t+'</a>');
            l = $('<li class="'+n+'_nav"></li>').append(c);
            $(selector).append(l);
        });
        return true;
    }

    generateCatalog(".catalog-body");

    // toggle side catalog
    $(".catalog-toggle").click((function(e){
        e.preventDefault();
        $('.side-catalog').toggleClass("fold")
    }))

    /*
     * Doc: https://github.com/davist11/jQuery-One-Page-Nav
     * Fork by Hux to support padding
     */
    async("/js/jquery.nav.js", function () {
        $('.catalog-body').onePageNav({
            currentClass: "active",
            changeHash: !1,
            easing: "swing",
            filter: "",
            scrollSpeed: 700,
            scrollOffset: 0,
            scrollThreshold: .2,
            begin: null,
            end: null,
            scrollChange: null,
            padding: 80
        });
    });
</script>



<!-- Multi-Lingual -->




<!-- Image to hack wechat -->
<img src="/img/avatar.jpg" width="0" height="0" />
<!-- Migrate from head to bottom, no longer block render and still work -->

</body>

</html>
